---
title: 第二周--区块链
date: 2019-11-18 18:18:59
tags:
 - 周记
categories:
 - 周记
---

#### 本周速记

一粒沙里看出一个世界，一朵野花里一座天堂，把无限放在你的手掌上，永恒在一刹那里收藏。 --布莱克

**方法论**

1. 区块链
2. BT种子

<!--more-->

#### 区块链

什么是区块链？可以说它只是一种特殊的数据结构，但不仅仅如此。区块链技术是由比特币创造的。这种技术逐渐有了所谓的区块链1.0（比特币）、区块链2.0（以太币）和区块链3.0的区分（EOS），而且也逐渐有了对应的应用技术。

[比特币历史](http://c.biancheng.net/view/1888.html)

so，why？为什么区块链这么火热，抛去炒作的因素，更多是它所带来的伟大变革。

区块链，可能是当下最有前景又充满分歧的技术与经济趋势。它给数字世界带来了“价值表示”和“价值转移”两项全新的基础功能。其潜力正在显现出来，但当下它又处于朦胧与野蛮生长的阶段。

对比互联网的发展史，现在的区块链可能相当于 1994 年的互联网，即互联网刚刚进入大众视野的时期，那也是第一波互联网革命萌芽的时期。谷歌、亚马逊、Facebook、腾讯、阿里巴巴、优步、滴滴，甚至现在市值超万亿的苹果都得益于那一时刻。

**现在区块链技术可能带来互联网的二次革命，把互联网从“信息互联网”带向“价值互联网”。在区块链的对照之下，人们发现，最初被形象地称为“信息高速公路”的互联网处理的是“信息”，而区块链能处理的是“价值”。**

变革即将发生，未来已来。我们又一次处于革命的起点——价值互联网的变革，而要理解价值互联网的未来，我们先要搞明白区块链技术是什么。

##### 比特币的诞生

2019年1月3日，这是一个值得记住的日子，在位于芬兰赫尔辛基的服务器上，至今匿名的神秘技术极客中本聪生成了第一个比特币区块，即所谓的比特币创世区块（genesis block）。

在创世区块的备注中，中本聪写入了当天英国《泰晤士报》的头版头条标题：

```
“The Times 03/Jan/2009 Chancellor on brink of second bailout for banks”
“《泰晤士报》，2009年1月3日，财政大臣站在第二次救助银行的边缘”
```

这样做，他记录了比特币系统启动和创世区块生成的时刻，又借这句话表达了对当时全球金融体系的暗讽。2009 年年初，全球金融体系刚经历了 2008 年金融危机的冲击，看起来摇摇欲坠。

在生成创世区块时，按自己设定的规则，中本聪获得了 50 个比特币奖励，这是最早的 50 个比特币。从创始区块开始，在比特币的账本上每 10 分钟就有新的数据区块被增加上去，新的比特币被凭空发行出来。比特币的开始运转，扩展到现在的由数万个节点组成的全球网络。

在比特币的创世时刻，它的三个组成部分都出现了，即加密数字货币（cryptocurrency）、分布式账本（distributed ledger）、去中心网络（decentralized network）

![UTOOLS1574817481844.png](https://i.loli.net/2019/11/27/3WtgaY7CDxU1olu.png)



在互联网的发展过程中，有着里程碑般的著名时刻，即白皮书的发布：利克里德写的开启互联网前身阿帕网的“计算机作为一种通信设备”（1968年）、蒂姆·伯纳斯-李写的万维网协议（WWW）建议书“信息管理：一个建议”（1989年）、谷歌联合创始人谢尔盖·布林与拉里·佩奇写的搜索引擎论文（1998年）等，以及比特币创始人中本聪“比特币：一个点对点电子现金系统”。

##### 为什么会有比特币

在创造比特币的过程中，中本聪发明了区块链技术，区块链是源自比特币的底层技术。那么，他为什么要创造比特币？他想解决什么难题？

如果回到中本聪创造它的时刻，我们会看到，比特币的出现是源于技术极客想解决的一个技术难题：“在数字世界中，如何创造一种具有现金特性的事物？”“比特币：一个点对点电子现金系统”这个标题体现出了中本聪想解决的难题：他想创造在数字世界中可用的电子现金，它可以**点对点**也就是**个人对个人**交易，交易中不需要任何中介参与。

来对比看看。在物理世界中，一个人可以把现金纸币给另一个人，不需要经过诸如银行、支付机构、见证人等中介机构。

但由于数字文件是可复制的，复制出来的电子文件是一模一样的，因而在数字世界中，我们不能简单地用一个数字文件作为代表价值的事物。同时，我们在支付机构中有多少钱，并没有像一张张钞票一样的数字文件可以代表，钱仅是中心化数据库中的记录。

在数字世界中，当一个人要把现金转给另一个人时，必须要有中介机构的参与。比如，我们通过支付宝转账的过程是：支付宝在一个人的账户记录里减掉一定金额，在另一个人的账户记录中增加一定金额。

在数字世界中，如何创建一个无须中介或者说去中心化的数字现金，一直是一个难题。由于数字文件可以完美复制，如果没有一个中心化数据库做记录，那如何避免一个人把一笔钱花两次？

这就是所谓的双重支付或双花问题（double spending）。在比特币出现之前，我们熟悉的主要电子现金系统（如PayPal、支付宝等）都是依靠中心化数据库来避免双花问题，这些可信第三方中介不可或缺

![UTOOLS1574817851831.png](https://i.loli.net/2019/11/27/GfyFoCPZkJqK2VR.png)

特别地，比特币这个电子现金系统是同时去中介化和去中心化的：

- 个人与个人之间的电子现金无须可信第三方中介的介入，这是去中介化。
- 这个电子现金的货币发行也不需要一个中心化机构，而是由代码与社区共识完成，这是去中心化。

##### 从比特币系统中发现区块链

在数字世界中，想要创造一种去中介化、去中心化的“电子现金”，同样要设计一套完整的系统。这一系统要能解决以下一系列问题：

- 这种“现金”如何公平、公正地发行出来，不被任何中心化的机构或个人控制？
- 如何实现像在物理世界中一样，一个人可以直接把现金递给另一个人，无须任何中介的协助？
- 这种电子现金如何“防伪”？在数字世界中，这个问题可转换为，一笔电子现金如何不被花费两次？

中本聪设计和开发了比特币系统，完美地解决了这些问题。说起比特币，人们常指的是比特币这种做价值表示的电子现金。其实，作为电子现金的比特币只是比特币系统的表层，比特币系统包括三层

- 最上一层是比特币这种电子现金。这是整个系统的应用层。
- 中间一层的功能是发行比特币与处理用户间的比特币转移。这一层也叫比特币协议（bitcoin protocol），是整个系统的应用协议层。
- 最底层是比特币的分布式账本和去中心网络。这一层也被称为比特币**区块链（bitcoin blockchain）**，是整个系统的通用协议层。

比特币系统的三层命名（应用层、应用协议层、通用协议层）源自知名区块链研究者梅兰妮·斯万，她也提出了被广泛引述的一种阶段划分：区块链 1.0 是货币、区块链 2.0 是合约、区块链 3.0 是应用。

![UTOOLS1574818493098.png](https://i.loli.net/2019/11/27/CdmkAn7ITa2lwNc.png)

比特币系统实现的去中心化的点对点电子现金，其发行与转账靠的是中间的比特币协议层。类比现实货币系统，这一层的角色相当于中央银行（发行货币）与银行（处理转账）等金融机构。

来深入看看名为“比特币协议”的这一层。比特币系统架构图又常被进一步细分为五层，它对应的是比特币协议和比特币区块链两个部分。在这个五层架构中，比特币协议层被细分为：应用层、激励层和共识层。

![UTOOLS1574818548998.png](https://i.loli.net/2019/11/27/vzZ7lIborXieJjt.png)

在设计比特币系统时，中本聪创造性地把计算机算力竞争和经济激励相结合，形成了工作量证明（proof-of-work，POW）共识机制，让挖矿计算机节点在计算竞争中完成了货币发行和记账功能，也完成了区块链账本和去中心网络的运维。这就形成了一个完整的循环：矿机挖矿（算力竞争），完成去中心化记账（运转系统），获得比特币形式的经济激励（经济奖励）。

比特币的工作量证明共识机制是承上启下的一层，连接了上层应用与下层技术：在其上的层次为电子现金的发行、转账、防伪；在其下的层次，去中心网络的节点达成一致，更新分布式账本。

##### 区块链的定义

最后，再让我们从不同的角度给区块链下一个定义吧。

第一种区块链的定义（比较通俗）

比特币：一种加密数字货币；区块链：一种基础技术。

区块链是一种源自于“比特币”的底层技术。换句话说，比特币是区块链技术的第一个大获成功的应用。

第二种区块链的定义

区块链是数字世界中进行“价值表示”和“价值转移”的技术。区块链硬币一面是表示价值的加密数字货币或通证，另一面是进行价值转移的分布式账本与去中心网络。

分布式账本与去中心网络也常被称为“链”，它可被视为一个软件平台；而表示价值的通证常被称为“币”。
智能合约

##### 当我们说区块链时，我们在说什么

比特币系统包括三层：比特币、比特币协议、比特币区块链，即比特币的分布式账本与去中心网络。那么，从比特币系统来对照看，说区块链时，我们说的可能是什么？

![QpduC9.png](https://s2.ax1x.com/2019/11/27/QpduC9.png)

区块链这个说法包括四种可能性，所覆盖的范围逐步变大：

- 可能性之一，区块链指的是比特币的数据结构，即由数据块（block）连接形成的链（chain），这也被称为“分布式账本”。在比特币白皮书中，中本聪分别提及了区块和链，但后来它们才被组合成了区块链（blockchain）这个新词。
- 可能性之二，区块链指的是比特币的分布式账本和去中心网络的组合。对应于比特币系统，它指的是整个第三层比特币区块链。
- 可能性之三，区块链指的是比特币系统的第二层（比特币协议）和第三层（比特币区块链）的组合。它包括分布式账本、去中心网络和比特币协议。
- 可能性之四，区块链指的是整个比特币系统，包括所有三层，既包括价值表示的比特币，也包括了背后支撑的整个系统。从这个范围看，是把区块链看成一个既包括技术部分，又包括经济部分的完整系统。

大众在提及区块链时，常指的是第四种最大的范围，即“账本+网络+协议+货币”。在产业中，人们在提到区块链时，通常指的是第三种范围，即“账本+网络+协议”。而很多软件开发者在说起区块链时通常指的是第二种范围“账本+网络”，即分布式账本加去中心网络。

##### 比特币是如何实现去中心化的

比特币系统设计的五个要点：比特币的区块链系统是由分布式账本（即狭义的区块链）和去中心网络（点对点网络）组成的，形成链条的方式是工作量证明共识机制。最长链是由网络中的算力共同决定的，因而它是可信的，节点离开和加入依据的是最长链是可信的这一原则。这些组合起来形成了比特币系统。

![Qpdxr6.png](https://s2.ax1x.com/2019/11/27/Qpdxr6.png)

1. 去中心化的点对点电子现金系统

   比特币要做的是一个“点对点的电子现金系统”，发送方和接收方直接交易，它们之间不需要中介机构的介入。

   要去掉可信第三方等中介机构，就需要解决“双花问题”。在摘要中，中本聪给出了点对点网络的解决方案，并介绍了这个方案的核心——区块链。他并没有提到区块链（blockchain）这个词，但在论文中分别提到了区块（block）和链（chain）这两个概念。

2. 分布式账本

   比特币的区块链是基于工作量证明形成的带时间戳、存储数据的数据块和由哈希指针连接成的链条。

   这个链条或者说账本以分布式的方式存储在比特币网络的各个节点上，因而也被称为分布式账本。

3. 工作量证明

   比特币网络中的节点按照规则进行加密哈希计算，以竞争获得生成新区块的权利。节点在竞争获胜后就获得记账权，它生成区块成为最新区块后，就获得与新区块对应的[挖矿](http://c.biancheng.net/view/1898.html)奖励。

   工作量证明也是区块链账本的安全机制。如果不重做“工作量证明”所需的大量计算则此链条不可修改，这一共识机制保证了区块链上的数据的可靠性。

4. 最长链原则

   在任何时刻，最长的链条是所有人都接受的最终记录。

   由于最长链是由网络中的主要算力完成的，因而只要它们不都与攻击者合作，那么它们生成的最长链就是可信的。这个原则被称为“最长链原则”。

5. 去中心网络

   比特币的去中心网络的架构非常简洁，本身需要的基础设施很少。它可以在互联网网络上运行。计算机节点可以随时离开或加入这个去中心网络，在加入时它们只需遵守最长链原则即可。

##### 比特币是如何转账的

假设我是甲，要把自己的钱包地址中的 8 个比特币转给你（乙），即转到你的钱包中去。详细讨论这一转账交易过程，我们可以看到比特币区块链是如何工作的五个技术性细节

1. 分布式账本和去中心网络

   比特币网络没有一个中心服务器，它是由众多全节点和轻节点组成的，这些节点形成一个**去中心网络**

   - 全节点包含所有比特币区块链的区块数据；
   - 轻节点仅包括与自己相关的数据

   比特币网络是完全开放的，任何服务器都可以接入、下载全部区块数据成为全节点。

   所有用户持有的比特币信息都存放在一个**分布式账本**之中。这个账本是一个不断增长的由数据块组成的链条，这个数据块组成的链条是狭义的“区块链”。比特币账本可被认为同时存储在所有的全节点之中。

   基于分布式账本与去中心网络，比特币系统实现了去中心化的价值表示和价值转移，它与中心化在线支付系统有很大的不同。

2. 未使用的交易输出（unspent transaction output，UTXO）：http://c.biancheng.net/view/1895.html

3. 比特币区块链的数据结构

   区块链之所以被称为 blockchain，是因为它的数据块以链状的形式存储着。从第一个区块即所谓的创世区块开始，新增的区块不断地被连到上一个区块的后面，形成一条链条。

   每个区块由两个部分组成——区块头部和区块数据。其中，区块头部中有一个哈希指针指向上一个区块，这个哈希指针包含前一个数据块的哈希值。哈希值可以被看成是数据块的指纹，即在后一个区块的头部中均存储有上一个区块数据的指纹。如果上一个区块中的数据被篡改了，那么数据和指纹就对不上号，篡改行为就被发现了。要改变一个区块中的数据，对其后的每个区块都必须相应地进行修改。

   一个区块中的数据是被打包进这个区块的一系列交易。这些交易按照既定的规则被打包形成特定的二叉树数据结构——梅克尔树（Merkle trees）。按目前的比特币区块的大小，一个区块中能容纳的交易数量在 2000 个左右，比如在第 526957 个区块中容纳了 1804 个交易。

   比特币区块链的数据结构中包括两种哈希指针，它们均是不可篡改特性的数据结构基础。一个是形成“区块+链”（block+chain）的链状数据结构，另一个是哈希指针形成的[梅克尔树](https://www.jianshu.com/p/bfee00d8d693)。链状数据结构使得对某一区块内的数据的修改很容易被发现；梅克尔树的结构起类似作用，使得对其中的任何交易数据的修改很容易被发现。

   ![Qp0uOx.png](https://s2.ax1x.com/2019/11/27/Qp0uOx.png)

4. 工作量证明共识机制

   去中心网络之所以需要共识机制，是因为这是一个非基于信任（non-trust-based）的网络，任何人无须许可都可以接入这个网络。并且，这些节点分散在网络条件差异非常大的全球互联网之中。在完全无中心的情况下，这些节点要同步一致，共识机制即为这些节点达成一致的机制。

   关于分布式网络的共识机制，有著名的“Fisher-Lynch-Paterson 不可能结果”，即在一定条件下达成共识是不可能的。而比特币的工作量证明共识机制在实践中被验证是有效的。这是因为它采用了一个实用主义的解决方案。

   比特币的工作量证明的关键特点是，它巧妙地融合技术和经济因素，不只是纯粹通过技术本身来达到这一点，而是纳入了与自身作为一个数字现金系统相关的挖矿奖励。

   - 奖励机制：为什么比特币网络中的节点们愿意打包交易、维护账本？它们并非出于“善意”，而是因为，它们能因这些挖矿行为获得比特币形式的经济激励。这是一个自行发行的电子现金系统的独特优势，如果所开发的是其他没有自行发行代币的 IT 系统，我们就无法设计矿工挖矿奖励这样的经济激励机制。

   - 随机性

     比特币系统形成的共识不是完全可靠的，但是在等待了 6 个区块约 1 个小时之后，出问题的概率呈指数级下降。在 6 个区块之后，一个交易发生双花情况的概率可被认为是零。从纯理论上看，完美的共识不可能达成，但从实用的角度看，这个共识是可信的。

5. 比特币挖矿机制与代币生成机制

   http://c.biancheng.net/view/1898.html

在沿着比特币系统所开创的路线开发各类基础公链时，开发者们从各个角度调整与改进以上五个技术性细节，形成新的区块链系统。

![QpwaoF.png](https://s2.ax1x.com/2019/11/27/QpwaoF.png)

##### 区块链变革

“区块链，是互联网的二次革命。”

“区块链，是互联网2.0。”

“区块链，让我们从信息互联网跨越到价值互联网。”

这是从互联网发展的视角出发，对区块链有什么意义做出的一些回答。

**信息传递 VS 价值转移**

之前，互联网处理的是“信息”；现在，互联网可以处理“价值”。从 2008 年到 2018 年，酝酿了近十年的区块链技术弥补了互联网与数字世界中一直缺失的另一半。区块链提供了在数字世界中处理价值所需的两个基础功能：价值表示与价值转移，让互联网跃迁到价值互联网

![QpB7a8.png](https://s2.ax1x.com/2019/11/27/QpB7a8.png)

**数字世界中的价值表示与价值转移**

信息传递的主要方式是复制。在互联网中不管是最基础的 TCP/IP 协议，还是 WWW（万维网）协议，都是专为信息传递设计的。并且，数字化的信息复制可以复制出一模一样的副本，复制效率更高，互联网给信息传递带来了巨变。

价值转移的主要方式是记录。从物理世界到数字世界，价值转移的方式都是记录。但是，用数据文件进行价值表示会遇到很多困难，可完美复制的数据文件和需要唯一性的价值表示形成冲突。如果表示价值的数据文件可以完美复制，那么我就可能把它支付给你，再复制一份支付给另一个人，造成双花问题。在数字世界中进行价值转移时，为了防止双花问题，我们要依赖可信第三方作为中介，由它作为交易中心进行记录。

这事实上成为互联网往下一步发展的隐形障碍。

- 价值表示功能：分布式账本改变了互联网上的价值表示方式
- 价值转移功能：[区块链成为互联网的价值基础协议](http://c.biancheng.net/view/1912.html)
- 价值表示物：数字世界中表示价值的通证

![QpDao8.png](https://s2.ax1x.com/2019/11/27/QpDao8.png)

区块链的第三、第四个定义如下

![QpDBWQ.png](https://s2.ax1x.com/2019/11/27/QpDBWQ.png)

##### 以太坊

通过深入了解比特币系统我们已经知道，区块链是源自比特币的底层技术，它让我们可以无须借助任何第三方中介直接进行价值表示和价值转移，它还给数字世界带来了价值表示物——通证。区块链将使互联网从“信息互联网”阶段跨越到“价值互联网”阶段。

但区块链技术要应用起来，还需要持续迭代升级。比特币系统和它的区块链都是专为创建一个去中心化的点对点电子现金而设计的。如果把比特币系统看成区块链 1.0，则以太坊是当之无愧的升级迭代版，是区块链 2.0 的典范。

1. [智能合约与去中心化应用的平台](http://c.biancheng.net/view/1918.html)

   维塔利克认为，比特币系统的主要设计 UTXO和其对应的脚本语言有缺陷，他总结认为它有以下四点不足

   - 缺少图灵完备性（lack of turing-completeness）。尽管比特币的脚本语言可以支持多种计算，但是它不能支持所有的计算。
   - 价值盲（value-blindness）。UTXO 脚本不能为账户的取款额度提供精细的控制。
   - 缺少状态（lack of state）。UTXO 只能是已花费或者未花费状态，这意味着 UTXO 只能用于建立简单的、一次性的合约。
   - 区块链盲（blockchain-blindness）。UTXO 看不到区块链的数据，比如区块头部的随机数、时间戳和上一个区块数据的哈希值。

   <img src="https://s2.ax1x.com/2019/11/27/QprSld.png" alt="QprSld.png" style="zoom:80%;" />

   在白皮书摘要部分，他这样描述以太坊的目标：

   ```
   以太坊的目标是，提供一个区块链，内置有成熟的图灵完备的编程语言，用这种语言可以创建合约来编码，实现任意状态转换功能。
   ```

   “状态转换”反映了维塔利克对比特币系统和区块链的认识。在白皮书中他认为，比特币是一个状态转换系统，而他为以太坊设计了一个更灵活的状态转换系统。

   以太坊的最初设计目标是建立一个智能合约和去中心化应用平台，它和比特币区块链的最大不同是，它包括了一个图灵完备的编程语言（Solidity）。利用 Solidity，我们可以在以太坊上更方便地编写“智能合约”，以太坊也提供了一个代码运行环境——以太坊虚拟机（EVM）。有了这些，在以太坊区块链上，逻辑上我们就可以开发去中心化应用（decentralized application）了。去中心化应用常被简写为 DAPP，现在它通常指利用了区块链技术的网站或移动 App 应用

   ![Qprt1J.png](https://s2.ax1x.com/2019/11/27/Qprt1J.png)

2. 用智能合约管理数字资产与 ERC20 通证标准

   在实践中，它跨出了一步或者说半步：以太坊区块链上最常用的功能并非去中心化应用，而是编写智能合约，更符合实际情况的说法是，编写智能合约以管理用通证表示的数字资产。

   这可能是区块链这个新兴技术在发展和应用过程中的必然阶段，一个新技术总会首先被用于当前条件下最适用的领域。

   在 2015 年 11 月 19 日，以太坊的主要开发者费边·沃格尔斯特勒（Fabian Vogelsteller）向社区提议了 ERC20 标准。

   这是一个用以太坊区块链智能合约发行可互换通证（fungible token）的方案。所谓可互换通证，指的是每一个通证都是一模一样的，比如任何两张 100 美元的价值是完全相同的，又比如你持有的一家上市公司的1万股普通股股票和我持有的 1 万股普通股是可互换的。

   
   另一种方案是在 2018 年 6 月正式获得以太坊社区认可的 ERC721 通证标准，它是不可互换通证（non-fungible token）。不可互换通证的参照物是棒球卡、邮票等收藏品等，比如我的一本专门题名给我的签名书和你的同一本书是不同的，二者不可互换。

   有了 ERC20 通证标准，我们可以在以太坊上很简单地编写一个智能合约，创建表示价值的通证。虽然这些通证所表示的价值是什么仍不明确，但大量的通证已经被创建出来。截至 2018 年 5 月，在以太坊上有 8 万多种创建 ERC20 标准通证的智能合约。

##### 区块链特征

区块链不只是技术，它还将从经济、管理、社会层面带来变化，它可能改变人类交易的方式，它将改变货币、账本、合同、协同等方面

![QpTG4J.png](https://s2.ax1x.com/2019/11/27/QpTG4J.png)

1. 不可篡改

   不可篡改是基于“区块+链”（block+chain）的独特账本而形成的：存有交易的区块按照时间顺序持续加到链的尾部。要修改一个区块中的数据，就需要重新生成它之后的所有区块。

   共识机制的重要作用之一是使得修改大量区块的成本极高，从而几乎是不可能的。以采用工作量证明的区块链网络（比如比特币、以太坊）为例，只有拥有 51% 的算力才可能重新生成所有区块以篡改数据。但是，破坏数据并不符合拥有大算力的玩家的自身利益，这种实用设计增强了区块链上的数据可靠性。

   通常，在区块链账本中的交易数据可以视为不能被“修改”，它只能通过被认可的新交易来“修正”。修正的过程会留下痕迹，这也是为什么说区块链是不可篡改的，篡改是指用作伪的手段改动或曲解。

   在现在常用的文件和关系型数据中，除非采用特别的设计，否则系统本身是不记录修改痕迹的。区块链账本采用的是与文件、数据库不同的设计，它借鉴的是现实中的账本设计——留存记录痕迹。因此，我们不能不留痕迹地“修改”账本，而只能“修正”账本

   ![QpT0HO.png](https://s2.ax1x.com/2019/11/27/QpT0HO.png)

2. 表示价值所需要的唯一性

   不管是可互换通证（ERC20），还是不可互换通证（ERC721），又或者是其他提议中的通证标准，以太坊的通证都展示了区块链的一个重要特征：表示价值所需要的唯一性。

   在数字世界中，最基本单元是比特，比特的根本特性是可复制。但是价值不能被复制，价值必须是唯一的。之前我们已经讨论过，这正是矛盾所在：在数字世界中，我们很难让一个文件是唯一的，至少很难普遍地做到这一点。这是现在我们需要中心化的账本来记录价值的原因。

   在数字世界中，我们没法像拥有现金一样，手上拿着钞票。在数字世界中，我们需要银行等信用中介，我们的钱是由银行账本帮忙记录的。

   比特币系统带来的区块链技术可以说第一次把“唯一性”普遍地带入了数字世界，而以太坊的通证将数字世界中的价值表示功能普及开来。

3. 智能合约

   从比特币到以太坊，区块链最大的变化是“智能合约”（见图3）。比特币系统是专为一种数字货币而设计的，它的 UTXO 和脚本也可以处理一些复杂的交易，但有很大的局限性。而维塔利克创建了以太坊区块链，他的核心目标都是围绕智能合约展开的：一个图灵完备的脚本语言、一个运行智能合约的虚拟机（EVM），以及后续发展出来的一系列标准化的用于不同类型通证的智能合约等。

   智能合约的出现使得基于区块链的两个人不只是可以进行简单的价值转移，而可以设定复杂的规则，由智能合约自动、自治地执行，这极大地扩展了区块链的应用可能性。

   当前把焦点放在通证的创新性应用上的项目，在软件层面都是通过编写智能合约来实现的。利用智能合约，我们可以进行复杂的数字资产交易。

   在讨论以太坊的发展过程时，在冷知识专栏“智能合约”“以太坊的智能合约”中，我们对智能合约进行了很多讨论，在此不再赘述。这里再借维塔利克的讨论，重复一下我们认同的智能合约的软件性质——它相当于一种特殊的服务端后台程序（daemon）。在以太坊白皮书中，维塔利克写道：

   （合约）应被看成是存在于以太坊执行环境中的“自治代理”（autonomous agents），它拥有自己的以太坊账户，收到交易信息，它们就相当于被捅了一下，然后它就自动执行一段代码。

   智能合约的执行流程如图

   ![QpTb2n.png](https://s2.ax1x.com/2019/11/27/QpTb2n.png)

   区块链的第五、第六个定义

   ![QpTOK0.png](https://s2.ax1x.com/2019/11/27/QpTOK0.png)

   

4. 去中心自组织

   区块链的第四大特征是去中心自组织。到目前为止，主要区块链项目的自身组织和运作都与这个特征紧密相关。很多人对区块链项目的理想期待是，它们成为自治运转的一个社区或生态。

   匿名的中本聪在完成比特币的开发和初期的迭代开发之后，就完全从互联网上消失了。但他创造的比特币系统持续地运转着：无论是比特币这个加密数字货币，比特币协议即它的发行与交易机制，比特币的分布式账本、去中心网络，还是比特币矿工和比特币开发，都去中心化、自组织地运转着。

   我们可以合理地猜测，在比特币之后出现了众多修改参数分叉形成的竞争币、硬分叉形成的比特币现金（BCH），可能都符合中本聪的设想。他选择了“失控”，失控可视为自治的同义词。

   在设想未来的组织时，我们心中的理想原型常是比特币的组织：完全去中心化的自治组织。但在实践过程中，为了效率和能够推进，我们又会略微往中心化组织靠拢，最终找到一个合适的平衡点。

   现在，在通过以太坊的智能合约创建和发放通证，并以社区或生态方式运行的区块链项目中，不少项目的理想状态是类似于比特币的组织，但实际情况是介于完全的去中心化组织和传统的公司之间。

   在讨论区块链的第四个特征去中心自组织时，其实我们已经在从代码的世界往外走，涉及人的组织与协同了。现在，各种讨论和实际探索也揭示了区块链在技术之外的意义：它可能作为基础设施支持人类的生产组织和协同的变革。这正是区块链与互联网是完全同构的又一例证，互联网也不仅仅是一项技术，它改变了人们的组织和协同。

##### EOS

从开发目标上来讲，比特币、以太坊、EOS 是渐进的，分别是区块链 1.0、区块链 2.0、区块链 3.0，重心分别是货币、合约、应用。以太坊在实际应用中是以通证为主的。以太坊、EOS 均是借鉴与延续之前的思路重新开发，以太坊是比特币的改进，EOS 是以太坊的改进

![QpbiB6.png](https://s2.ax1x.com/2019/11/27/QpbiB6.png)

比特币的设计思路类似于黄金。在数字世界中，按工作量证明共识机制，[挖矿](http://c.biancheng.net/view/1898.html)节点进行加密计算，获得比特币形式的挖矿奖励。挖矿节点也可以获得交易费收益，不过，虽然在比特币网络中的资产价值高，但交易并不频繁，交易费收益目前在矿工收益中的占比并不高。

以太坊的设计思路类似于高速公路。在这条收费高速公路上，车辆行驶需要付费。它早期募集资金，建设“高速公路”，早期投资者享有“高速公路”的主要权益。之后，一起建设与维护“高速公路”的挖矿节点也可以获得挖矿奖励与交易费收益。在以太坊网络中，由于各类项目已经基于它生成了大量的通证，以太坊网络的交易量相对较多，挖矿节点获得的交易费收益占比高于比特币。

EOS 的设计思路则类似于房地产开发。Block.one 公司在将土地售卖出去之后，逻辑上它用获得的资金进行基础的开发，此后每年再以类似填海造田的方式增加 5% 的土地出来。

EOS 的繁荣主要取决于，已经竞购得到大量土地的开发商是不是开发和经营好自己的地块？EOS 网络要依靠超级节点（即区块生产者）来各自建设、共同运营，按现在的设计，这些节点共同获得每年 1% 新增发的 EOS 作为回报。

与以太坊不同，EOS 网络的设计是不再收取网络交易费，持有 EOS 通证则拥有对应的网络使用权利。但是，如果一个应用的开发者不持有足够的 EOS 通证，可能就要从市场中购买和付费租用，以获得使用主网的权利。类比来看，这种设计类似于购买或租用办公楼。

当然，以上用比喻的方式讨论只是为了便于理解。EOS 实际的情况是：Block.one 公司募集资金开发一个名为 EOSIO 的开源软件。EOS 社区用这个软件来运行 EOS 主网，且从逻辑上来讲，这个主网并非由 Block.one 公司运行，而是由社区运行的。另外，其他人也用 EOSIO 这个开源软件建立替代网（altnet）。

EOS 是对以太坊的改进，各个用 EOSIO 开源软件运行起来的区块链网络，可以做几乎所有以太坊能做的事，如编写智能合约、发行通证。

**EOS 的体系架构：与比特币、以太坊的对比**

![QpbOKI.png](https://s2.ax1x.com/2019/11/27/QpbOKI.png)

在最基础的层次——数据层和网络层上，EOS 和比特币、以太坊并没有多大的区别。

EOS 的共识机制采用了与之前较为不同的 DPOS（委托权益证明）共识机制。由于采用 DPOS 共识机制，EOS 网络的激励层就可以看成不再单独存在（图中也未表示出来）。EOS 网络每年新增发 5% 的 EOS 币，其中 1% 按一定的规则分配给区块生产者，另外 4% 进入社区的提案系统（worker proposal system）资金池待分配。

EOS 的智能合约和以太坊略有差异，但基本上采取了相似的设计。EOS 的应用也与以太坊相似。因此，对于合约层和应用层，两者是相似的。

EOS 的体系设计的创新在于工具层和生态层。

为了让 EOS 适用于应用开发，EOS 团队为它设计了账户、持续化数据库（Multi-Index DB）等工具与接口。因此，这里延续唐煜的分类，认为在合约层和应用层之间存在一个工具层，这使得在 EOS 区块链上开发应用更为便利。

EOS 的另一个特殊设计在于，它将自己的 EOS 主网和 EOSIO 软件分开，鼓励开发者采用 EOSIO 软件建立行业专用、领域专用的区块链网络（应采用新的网络名），并建立自己的一系列应用。在体系架构的最上层可能出现一个生态层，这一层是采用 EOSIO 软件的区块链，比如专为游戏、物流、金融、社交、能源、医疗开发的公链。

##### 区块链“不可能三角”

一个基础公链要同时兼顾功能、性能、网络三个要素。在区块链设计中，还有一个更知名的“不可能三角”，它指的是，一个区块链项目无法同时满足三个条件，最多只能同时满足两个条件：

- 可扩展性（scalability）
- 去中心化（decentralization）
- 安全（security）

![QpvDV1.png](https://s2.ax1x.com/2019/11/27/QpvDV1.png)

对比一下比特币和 EOS：比特币系统看重的是去中心化和安全，而牺牲了可扩展性；EOS 在一定程度上牺牲了去中心化，而去追求可扩展性与安全。

### 扩展阅读

1. [区块链技术快速入门教程（非常详细）](http://c.biancheng.net/blockchain/)
2. [区块链 新经济蓝图及导读](https://pan.baidu.com/s/1oJ1zE-tGmRR6ORthiWpFDA)
3. [比特币区块链的数据信息](https://blockchain.info/)
4. [以太坊的网络信息](https://etherscan.io/)
5. [EOS 区块链网络（EOS 主网）的信息](https://eostracker.io/)
6. [以太坊技术白皮书](https://ethereum.github.io/yellowpaper/paper.pdf)
7. [一文读懂实用拜占庭容错(PBFT)算法](https://www.cnblogs.com/space007/p/9729734.html)
8. [区块链去中心化的生命之源：“DPOS（委托权益证明）共识机制”](https://www.jianshu.com/p/49bfa2b358b3)
9. [常见的几种共识机制](https://www.jianshu.com/p/036c50061f09)