<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux-权限管理和文本处理 | 平心de小屋</title><meta name="keywords" content="Linux"><meta name="author" content="平心"><meta name="copyright" content="平心"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言linux上使用者都有一个唯一的标识符，称为UID,其中管理员UID为0，在CenOS6上系统用户UID为1到499，在CentOS7上系统用户UID为1到999，普通登录用户UID到65535。linux上用户必须属于一个组（基本组），组也有一个组标识GID，其中管理员组GID为0，在CenOS6上系统用户组GID为1到499，在CentOS7上系统用户组GID为1到999，普通登录用户组G">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux-权限管理和文本处理">
<meta property="og:url" content="https://pingxin0521.gitee.io/2019/03/19/Linux-%E5%9F%BA%E7%A1%80-4/index.html">
<meta property="og:site_name" content="平心de小屋">
<meta property="og:description" content="前言linux上使用者都有一个唯一的标识符，称为UID,其中管理员UID为0，在CenOS6上系统用户UID为1到499，在CentOS7上系统用户UID为1到999，普通登录用户UID到65535。linux上用户必须属于一个组（基本组），组也有一个组标识GID，其中管理员组GID为0，在CenOS6上系统用户组GID为1到499，在CentOS7上系统用户组GID为1到999，普通登录用户组G">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg">
<meta property="article:published_time" content="2019-03-19T08:55:22.000Z">
<meta property="article:modified_time" content="2019-10-10T06:47:52.000Z">
<meta property="article:author" content="平心">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg"><link rel="shortcut icon" href="https://s2.ax1x.com/2020/02/11/1ovFOA.png"><link rel="canonical" href="https://pingxin0521.gitee.io/2019/03/19/Linux-%E5%9F%BA%E7%A1%80-4/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux-权限管理和文本处理',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2019-10-10 14:47:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://s2.ax1x.com/2020/02/11/1ovw6J.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">449</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">77</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">68</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">平心de小屋</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux-权限管理和文本处理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-03-19T08:55:22.000Z" title="发表于 2019-03-19 16:55:22">2019-03-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2019-10-10T06:47:52.000Z" title="更新于 2019-10-10 14:47:52">2019-10-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/%E5%9F%BA%E7%A1%80/">基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>43分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux-权限管理和文本处理"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>linux上使用者都有一个唯一的标识符，称为UID,其中管理员UID为0，在CenOS6上系统用户UID为1到499，在CentOS7上系统用户UID为1到999，普通登录用户UID到65535。linux上用户必须属于一个组（基本组），组也有一个组标识GID，其中管理员组GID为0，在CenOS6上系统用户组GID为1到499，在CentOS7上系统用户组GID为1到999，普通登录用户组GID到65535。</p>
<p>此外，用户也可以属于多个附加组。私有组：组名同用户名，且只包含一个用户；公共组：组内包含了多个用户。组名和GID的解析通过/etc/group文件记录。</p>
<span id="more"></span>

<h3 id="认证信息"><a href="#认证信息" class="headerlink" title="认证信息"></a>认证信息</h3><p>用户通过给出用户名和密码来登录系统，系统根据/etc/passwd文件来查找用户名对应UID，如果允许该用户登录，则查看密码是否与/etc/shadow里面的密码相同，相同则通过身份认证（Authentication），然后进入授权（Authorization），在用户登录全过程进行审计（Audition），记录其行为。</p>
<p>密码使用策略：</p>
<p>1、使用随机密码；<br>2、最短长度不要低于8位；<br>3、应该使用大写字母、小写字母、数字和标点符号四类字符中至少三类；<br>4、定期更换；</p>
<p>设置密码时会使用单向加密算法进行加密，存储在/etc/shadow，后面登录使用用户输入密码进行单向加密与/etc/shadow存储的密码比较。</p>
<p>/etc/passwd文件存储用户的信息。总共有七个字段，分别是：<code>name:password:UID:GID:GECOS:directory:shell</code>。name: 用户名；password：可以是加密的密码，也可是占位符x；UID：用户ID；GID：用户所属的主组的ID号；GECOS：注释信息；directory：用户的家目录；shell：用户的默认shell，登录时默认shell程序；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<p>/etc/shadow文件用来存储用户密码。各字段表示意义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:加密的密码:最近一次修改密码的时间:最短使用期限:最长使用期限:警告期段:过期期限:保留字段</span><br></pre></td></tr></table></figure>

<p>/etc/group是组的信息库，里面的字段为：<code>group_name:password:GID:user_list</code>。user_list：该组的用户成员；以此组为附加组的用户的用户列表。</p>
<p>用户组也有密码，但不经常用，密码存放在/etc/gshadow。</p>
<p>安装上下文：进程以其发起者的身份运行；进程对文件的访问权限，取决于发起此进程的用户的权限。</p>
<p>系统用户：为了能够让那后台进程或服务类进程以非管理员的身份运行，通常需要为此创建多个普通用户；这类用户从不用登录系统</p>
<h3 id="用户命令"><a href="#用户命令" class="headerlink" title="用户命令"></a>用户命令</h3><p>需要管理员权限才能使用。创建用户和组的时候，默认使用/etc/login.defs中的默认值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">QMAIL_DIR      Maildir</span></span><br><span class="line">MAIL_DIR        /var/spool/mail #用户默认邮箱位置</span><br><span class="line"><span class="meta">#</span><span class="bash">MAIL_FILE      .mail</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Password aging controls:</span></span><br><span class="line">PASS_MAX_DAYS   99999 #密码最长过期时间，天</span><br><span class="line">PASS_MIN_DAYS   0  #密码最短过期时间，天</span><br><span class="line">PASS_MIN_LEN    5 #密码最小长度</span><br><span class="line">PASS_WARN_AGE   7 #密码过期时间前多少天发出警告</span><br><span class="line"><span class="meta">#</span><span class="bash">用户ID</span></span><br><span class="line">UID_MIN                  1000 #最小自动分配的普通登录用户ID</span><br><span class="line">UID_MAX                 60000 #最大自动分配的普通登录用户ID</span><br><span class="line"><span class="meta">#</span><span class="bash"> System accounts</span></span><br><span class="line">SYS_UID_MIN               201 #最小自动分配的系统用户ID</span><br><span class="line">SYS_UID_MAX               999 #最大自动分配的系统用户ID</span><br><span class="line"><span class="meta">#</span><span class="bash">用户组ID</span></span><br><span class="line">GID_MIN                  1000</span><br><span class="line">GID_MAX                 60000</span><br><span class="line"><span class="meta">#</span><span class="bash"> System accounts</span></span><br><span class="line">SYS_GID_MIN               201</span><br><span class="line">SYS_GID_MAX               999</span><br><span class="line"><span class="meta">#</span><span class="bash">USERDEL_CMD    /usr/sbin/userdel_local <span class="comment">#用户删除调用的脚本</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">是否创建家目录</span></span><br><span class="line">CREATE_HOME     yes</span><br><span class="line"><span class="meta">#</span><span class="bash">家目录访问权限掩码</span></span><br><span class="line">UMASK           077</span><br><span class="line"><span class="meta">#</span><span class="bash"> This enables userdel to remove user groups <span class="keyword">if</span> no members exist.</span></span><br><span class="line">USERGROUPS_ENAB yes</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用 SHA512加密密码.</span></span><br><span class="line">ENCRYPT_METHOD SHA512</span><br></pre></td></tr></table></figure>

<h4 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h4><p><strong>groupadd</strong></p>
<p>用户组添加。语法：<code>groupadd [选项] GROUPNAME</code>。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-g GID：指定GID；默认是上一个组的GID+1；</span><br><span class="line">-r: 创建系统组；</span><br><span class="line">-p, --password PASSWORD       为新组使用此加密过的密码</span><br><span class="line"> -R, --root CHROOT_DIR         chroot 到的目录，后面再讲</span><br></pre></td></tr></table></figure>

<p><strong>groupmod</strong></p>
<p>修改用户组属性。语法：<code>groupmod [选项] GROUPNAME</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-g, --gid GID                 将组 ID 改为 GID</span><br><span class="line"> -n, --new-name NEW_GROUP      改名为 NEW_GROUP</span><br><span class="line"> -o, --non-unique              允许使用重复的 GID</span><br><span class="line"> -p, --password PASSWORD       将密码更改为(加密过的) PASSWORD</span><br><span class="line"> -R, --root CHROOT_DIR         chroot 到的目录，后面再讲</span><br></pre></td></tr></table></figure>

<p><strong>groupdel</strong></p>
<p>删除用户组。用法：<code>groupdel [选项] GROUP</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-R, --root CHROOT_DIR         chroot 到的目录，后面再讲</span><br></pre></td></tr></table></figure>

<p><strong>groupmems</strong></p>
<p>更改组内成员。用法：<code>groupmems [选项] [动作]</code>。</p>
<p>选项：<br>  -g, –group groupname         更改组 groupname，而不是用户的组(只 root)<br>  -R, –root CHROOT_DIR         chroot 到的目录，后面再讲</p>
<p>动作：<br>  -a, –add username            将用户 username 添加到组成员中<br>  -d, –delete username         从组的成员中删除用户 username<br>  -p, –purge                   从组中移除所有成员<br>  -l, –list                    列出组中的所有成员</p>
<p>实例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo groupadd ping</span><br><span class="line">[hyp@promote ~]$ sudo tail -1 /etc/group</span><br><span class="line">ping:x:1002:</span><br><span class="line">[hyp@promote ~]$ sudo groupmod ping -n newping</span><br><span class="line">[hyp@promote ~]$ sudo tail -1 /etc/group</span><br><span class="line">newping:x:1002:</span><br><span class="line">[hyp@promote ~]$ sudo groupmems -g newping -a root</span><br><span class="line">[hyp@promote ~]$ sudo groupmems -g newping -l</span><br><span class="line">root</span><br><span class="line">[hyp@promote ~]$ sudo groupdel  newping</span><br><span class="line">[hyp@promote ~]$ sudo tail -1 /etc/group  #并不是newping</span><br></pre></td></tr></table></figure>

<p><strong>groups</strong></p>
<p>查看用户所属组。用法：groups  [用户名]…</p>
<p>实例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ whoami #查看本地等于用户</span><br><span class="line">hyp</span><br><span class="line">[hyp@promote ~]$ groups hyp #查看此用户所属组</span><br><span class="line">hyp : hyp wheel</span><br></pre></td></tr></table></figure>

<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p><strong>useradd</strong></p>
<p>用户添加命令。用法：<code>useradd [选项] USERNAME</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-u, --uid UID：指定UID；</span><br><span class="line">-g, --gid GROUP：指定基本组ID，此组得事先存在；</span><br><span class="line">-G, --groups GROUP1[,GROUP2,...[,GROUPN]]]：指明用户所属的附加组，多个组之间用逗号分隔；</span><br><span class="line">-c, --comment COMMENT：指明注释信息；</span><br><span class="line">-d, --home HOME_DIR：以指定的路径为用户的家目录；通过复制/etc/skel此目录并重命名实现；指定的家目录路径如果事先存在，则不会为用户复制环境配置文件；</span><br><span class="line">-s, --shell SHELL：指定用户的默认shell，可用的所有shell列表存储在/etc/shells文件中；</span><br><span class="line">-r, --system：创建系统用户；</span><br><span class="line">-m, --create-home     创建用户的主目录</span><br><span class="line">-M, --no-create-home          不创建用户的主目录</span><br><span class="line">-D, --defaults                显示或更改默认的 useradd 配置</span><br><span class="line">-e, --expiredate EXPIRE_DATE  新账户的过期日期</span><br><span class="line">-f, --inactive INACTIVE       新账户的密码不活动期</span><br><span class="line">-k, --skel SKEL_DIR   使用此目录作为SHELL目录</span><br><span class="line">-b, --base-dir BASE_DIR       新账户的主目录的基目录</span><br><span class="line">useradd -D：显示创建用户的默认配置；</span><br><span class="line">useradd -D 选项: 修改默认选项的值；</span><br><span class="line">修改的结果保存于/etc/default/useradd文件中；</span><br></pre></td></tr></table></figure>

<p><strong>userdel</strong></p>
<p>删除用户。用法：<code>userdel [选项] USERNAME</code>。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-r：删除用户时一并删除其家目录</span><br></pre></td></tr></table></figure>

<p><strong>usermod</strong></p>
<p>修改用户信息。用法：<code>usermod [选项] USERNAME</code>。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-u, --uid UID：修改用户的ID为此处指定的新UID；</span><br><span class="line">-g, --gid GROUP：修改用户所属的基本组；</span><br><span class="line">-G, --groups GROUP1[,GROUP2,...[,GROUPN]]]：修改用户所属的附加组；原来的附加组会被覆盖；</span><br><span class="line">-a, --append：与-G一同使用，用于为用户追加新的附加组；</span><br><span class="line">-c, --comment COMMENT：修改注释信息；</span><br><span class="line">-d, --home HOME_DIR：修改用户的家目录；用户原有的文件不会被转移至新位置；</span><br><span class="line">-m, --move-home：只能与-d选项一同使用，用于将原来的家目录移动为新的家目录；</span><br><span class="line">-l, --login NEW_LOGIN：修改用户名；</span><br><span class="line">-s, --shell SHELL：修改用户的默认shell；</span><br><span class="line">-L, --lock：锁定用户密码；即在用户原来的密码字符串之前添加一个&quot;!&quot;；</span><br><span class="line">-U, --unlock：解锁用户的密码；</span><br></pre></td></tr></table></figure>

<p><strong>id</strong></p>
<p>显示用户的真实ID。语法：<code>id [OPTION]... [USER]</code>。</p>
<p>组后面第一个组为默认有效组，其他为附加组。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-u: 仅显示有效的UID；</span><br><span class="line">-g: 仅显示用户的基本组ID; </span><br><span class="line">-G：仅显示用户所属的所有组的ID；</span><br><span class="line">-n: 显示名字而非ID；</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ id root</span><br><span class="line">uid=0(root) gid=0(root) 组=0(root)</span><br><span class="line">[hyp@localhost ~]$ id hyp</span><br><span class="line">uid=1000(hyp) gid=1000(hyp) 组=1000(hyp),10(wheel)</span><br></pre></td></tr></table></figure>

<p><strong>su</strong></p>
<p>switch user：切换登录用户。</p>
<p>登录式切换：会通过读取目标用户的配置文件来重新初始化<br>    su - USERNAME<br>    su -l USERNAME<br>非登录式切换：不会读取目标用户的配置文件进行初始化<br>    su USERNAME</p>
<p>注意：管理员可无密码切换至其它任何用户；</p>
<p>-c ‘COMMAND’：仅以指定用户的身份运行此处指定的命令。</p>
<p><strong>练习题</strong>：</p>
<p>练习1：创建用户gentoo，UID为4001，基本组为gentoo，附加组为distro(GID为5000)和peguin(GID为5001)；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo groupadd -g 5000 distro</span><br><span class="line">[hyp@promote ~]$ sudo groupadd -g 5001 peguin</span><br><span class="line">[hyp@promote ~]$ tail -2 /etc/group</span><br><span class="line">distro:x:5000:</span><br><span class="line">peguin:x:5001:</span><br><span class="line">[hyp@promote ~]$ sudo useradd -u 4001 gentoo  -G 5000,5001</span><br><span class="line">[hyp@promote ~]$ tail -3 /etc/group</span><br><span class="line">distro:x:5000:gentoo</span><br><span class="line">peguin:x:5001:gentoo</span><br><span class="line">gentoo:x:4001:</span><br><span class="line">[hyp@promote ~]$ sudo tail -1 /etc/passwd</span><br><span class="line">gentoo:x:4001:4001::/home/gentoo:/bin/bash</span><br></pre></td></tr></table></figure>

<p>练习2：创建用户fedora，其注释信息为”Fedora Core”，默认shell为/bin/tcsh；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo useradd fedora -c &#x27;Fedora Core&#x27; -s /bin/tcsh</span><br><span class="line">[hyp@promote ~]$ tail -1 /etc/passwd</span><br><span class="line">fedora:x:4002:4002:Fedora Core:/home/fedora:/bin/tcsh</span><br></pre></td></tr></table></figure>

<p>练习3：修改gentoo用户的家目录为/var/tmp/gentoo；要求其原有文件仍能被用户访问；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo usermod gentoo -m -d /var/tmp/gentoo/</span><br></pre></td></tr></table></figure>

<p>练习4：为gentoo新增附加组netadmin；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo groupadd netadmin -g 4003</span><br><span class="line">[hyp@promote ~]$ sudo usermod gentoo  -aG 4003</span><br><span class="line">[hyp@promote ~]$ tail -4 /etc/group</span><br><span class="line">peguin:x:5001:gentoo</span><br><span class="line">gentoo:x:4001:</span><br><span class="line">fedora:x:4002:</span><br><span class="line">netadmin:x:4003:gentoo</span><br></pre></td></tr></table></figure>

<p>练习5：删除所创建的用户组和用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hyp@promote ~]$ sudo groupdel &#x27;distro&#x27;</span><br><span class="line">[hyp@promote ~]$ sudo groupdel &#x27;peguin&#x27;</span><br><span class="line">[hyp@promote ~]$ sudo groupdel &#x27;netadmin&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash">由于用户组fedora和gentoo是用户的主组</span></span><br><span class="line">[hyp@promote ~]$ sudo groupdel &#x27;gentoo&#x27;</span><br><span class="line">groupdel：不能移除用户“gentoo”的主组</span><br><span class="line">[hyp@promote ~]$ sudo groupdel &#x27;fedora&#x27;</span><br><span class="line">groupdel：不能移除用户“fedora”的主组</span><br><span class="line"><span class="meta">#</span><span class="bash">需要先删除用户，加上-r会删除用户家目录和邮件目录。此时也会删除对应的主组</span></span><br><span class="line">[hyp@promote ~]$ sudo userdel -r fedora</span><br><span class="line">[hyp@promote ~]$ sudo userdel -r gentoo</span><br></pre></td></tr></table></figure>

<h4 id="命令补充"><a href="#命令补充" class="headerlink" title="命令补充"></a>命令补充</h4><p><strong>passwd</strong></p>
<p>用户密码修改。语法：<code>passwd [选项] USERNAME</code></p>
<p>(1) passwd：修改用户自己的密码；<br>(2) passwd USERNAME：修改指定用户的密码，但仅root有此权限；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-l, -u：锁定和解锁用户；</span><br><span class="line">-d：清除用户密码串；</span><br><span class="line">-e DATE: 过期期限，日期；</span><br><span class="line">-i DAYS：非活动期限；</span><br><span class="line">-n DAYS：密码的最短使用期限；</span><br><span class="line">-x DAYS：密码的最长使用期限；</span><br><span class="line">-w DAYS：警告期限；</span><br><span class="line">--stdin：</span><br><span class="line">	echo &quot;PASSWORD&quot; | passwd --stdin USERNAME</span><br></pre></td></tr></table></figure>

<p><strong>chage</strong></p>
<p>更改用户密码过期信息。chage [OPTION]  USERNAME</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-d, --lastday 最近日期        将最近一次密码设置时间设为“最近日期”</span><br><span class="line">-E, --expiredate 过期日期     将帐户过期时间设为“过期日期”</span><br><span class="line">-I, --inactive INACITVE       过期 INACTIVE 天数后，设定密码为失效状态</span><br><span class="line">-l, --list                    显示帐户年龄信息</span><br><span class="line">-m, --mindays 最小天数        将两次改变密码之间相距的最小天数设为“最小天数”</span><br><span class="line">-M, --maxdays 最大天数        将两次改变密码之间相距的最大天数设为“最大天数”</span><br><span class="line">-W, --warndays 警告天数       将过期警告天数设为“警告天数”</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ chage -l hyp</span><br><span class="line">最近一次密码修改时间                                    ：从不</span><br><span class="line">密码过期时间                                    ：从不</span><br><span class="line">密码失效时间                                    ：从不</span><br><span class="line">帐户过期时间                                            ：从不</span><br><span class="line">两次改变密码之间相距的最小天数          ：0</span><br><span class="line">两次改变密码之间相距的最大天数          ：99999</span><br><span class="line">在密码过期之前警告的天数        ：7</span><br><span class="line">[hyp@localhost ~]$ sudo chage -W 30 hyp</span><br><span class="line">[sudo] hyp 的密码：</span><br><span class="line">[hyp@localhost ~]$ chage -l hyp</span><br><span class="line">最近一次密码修改时间                                    ：从不</span><br><span class="line">密码过期时间                                    ：从不</span><br><span class="line">密码失效时间                                    ：从不</span><br><span class="line">帐户过期时间                                            ：从不</span><br><span class="line">两次改变密码之间相距的最小天数          ：0</span><br><span class="line">两次改变密码之间相距的最大天数          ：99999</span><br><span class="line">在密码过期之前警告的天数        ：30</span><br></pre></td></tr></table></figure>

<p><strong>pwck</strong></p>
<p>检查密码文件的完整性。用法：<code>pwck [选项] [passwd [ shadow ]]</code>。</p>
<p>pwck 命令检查用户及其认证信息的完整性。它检查 /etc/passwd 和/etc/shadow格式正确、数据有效。将会提示用户删除格式不正确或者有其它错误的项。</p>
<p><strong>gpasswd</strong></p>
<p>为组提供管理员，文件/etc/gshadow。用法：<code>gpasswd [OPTION] GROUPNAME</code>。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-a, --add USER                向组 GROUP 中添加用户 USER</span><br><span class="line"> -d, --delete USER             从组 GROUP 中添加或删除用户</span><br><span class="line"> -Q, --root CHROOT_DIR         要 chroot 进的目录</span><br><span class="line"> -r, --delete-password         remove the GROUP&#x27;s password</span><br><span class="line"> -R, --restrict                向其成员限制访问组 GROUP</span><br><span class="line"> -M, --members USER,...        设置组 GROUP 的成员列表</span><br><span class="line"> -A, --administrators ADMIN,...        设置组的管理员列表</span><br></pre></td></tr></table></figure>

<p>除非使用 -A 或 -M 选项，不能结合使用这些选项。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo useradd -m ping</span><br><span class="line">[hyp@localhost ~]$ id ping</span><br><span class="line">uid=1002(ping) gid=1002(ping) 组=1002(ping)</span><br><span class="line">[hyp@localhost ~]$ sudo gpasswd -a ping hyp</span><br><span class="line">正在将用户“ping”加入到“hyp”组中</span><br><span class="line">[hyp@localhost ~]$ id ping</span><br><span class="line">uid=1002(ping) gid=1002(ping) 组=1002(ping),1000(hyp)</span><br><span class="line">[hyp@localhost ~]$ sudo gpasswd -d ping hyp</span><br><span class="line">正在将用户“ping”从“hyp”组中删除</span><br><span class="line">[hyp@localhost ~]$ id ping</span><br><span class="line">uid=1002(ping) gid=1002(ping) 组=1002(ping)</span><br><span class="line">[hyp@localhost ~]$ sudo userdel -r ping</span><br></pre></td></tr></table></figure>

<p><strong>grpck</strong></p>
<p>检查组文件的完整性（etc/group以及/etc/gshadow文件）。用法：<code>grpck [选项] [group [ shadow ]]</code>。</p>
<p><strong>newgrp</strong></p>
<p>临时切换指定的组为基本组。用法：<code>newgrp [-] [group]</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ id</span><br><span class="line">uid=1000(hyp) gid=1000(hyp) 组=1000(hyp),10(wheel) 环境=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">[hyp@localhost ~]$  newgrp wheel</span><br><span class="line">[hyp@localhost ~]$ id</span><br><span class="line">uid=1000(hyp) gid=10(wheel) 组=10(wheel),1000(hyp) 环境=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br></pre></td></tr></table></figure>

<p>如果一个用户同时隶属于两个或两个以上分组，需要切换到其它用户组来执行一些操作，就用到了newgrp命令切换当前登陆所在组。</p>
<p><strong>chsh</strong></p>
<p>更改用户默认Shell脚本。用法：<code>chsh [选项] [用户名]</code></p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-s, --shell &lt;shell&gt;  指定登录 shell</span><br><span class="line">-l, --list-shells    打印 shell 列表并退出</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ chsh -l</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br></pre></td></tr></table></figure>

<p><strong>finger</strong></p>
<p>管理用户个人办公信息，需要安装 <code>sudo yum install finger</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ finger -s  hyp</span><br><span class="line">Login     Name       Tty      Idle  Login Time   Office     Office Phone   Host</span><br><span class="line">hyp       hyp        pts/0          Mar 20 12:59                           (192.168.174.1)</span><br><span class="line">[hyp@localhost ~]$ finger hyp</span><br><span class="line">Login: hyp                              Name: hyp</span><br><span class="line">Directory: /home/hyp                    Shell: /bin/bash</span><br><span class="line">On since 三 3月 20 12:59 (CST) on pts/0 from 192.168.174.1</span><br><span class="line">   5 seconds idle</span><br><span class="line">No mail.</span><br><span class="line">No Plan.</span><br></pre></td></tr></table></figure>

<p><strong>chfn</strong></p>
<p>改变<code>finger</code>命令显示的信息。语法：<code>chfn [选项] [用户名]</code>。</p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-f, --full-name &lt;全名&gt;       真实姓名</span><br><span class="line">-o, --office &lt;办公&gt;          办公号码</span><br><span class="line">-p, --office-phone &lt;电话&gt;   办公电话</span><br><span class="line">-h, --home-phone &lt;电话&gt;     住宅电话</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ finger hyp</span><br><span class="line">Login: hyp                              Name: hyp</span><br><span class="line">Directory: /home/hyp                    Shell: /bin/bash</span><br><span class="line">On since 三 3月 20 12:59 (CST) on pts/0 from 192.168.174.1</span><br><span class="line">   2 seconds idle</span><br><span class="line">No mail.</span><br><span class="line">No Plan.</span><br><span class="line">[hyp@localhost ~]$ chfn -f 韩云朋 hyp</span><br><span class="line">Changing finger information for hyp.</span><br><span class="line">密码：</span><br><span class="line">Finger information changed.</span><br><span class="line">[hyp@localhost ~]$ finger hyp</span><br><span class="line">Login: hyp                              Name: 韩云朋</span><br><span class="line">Directory: /home/hyp                    Shell: /bin/bash</span><br><span class="line">On since 三 3月 20 12:59 (CST) on pts/0 from 192.168.174.1</span><br><span class="line">   6 seconds idle</span><br><span class="line">No mail.</span><br><span class="line">No Plan.</span><br></pre></td></tr></table></figure>

<h4 id="理解chroot"><a href="#理解chroot" class="headerlink" title="理解chroot"></a>理解chroot</h4><p>chroot，即 change root directory (更改 root 目录)。在 linux 系统中，系统默认的目录结构都是以 <code>/</code>，即是以根 (root) 开始的。而在使用 chroot 之后，系统的目录结构将以指定的位置作为 <code>/</code> 位置。</p>
<p>用法：<code>chroot [选项] 新根 [命令 [参数]...]</code><br>　或：<code>chroot 选项</code></p>
<p>在经过 chroot 之后，系统读取到的目录和文件将不在是旧系统根下的而是新根下(即被指定的新的位置)的目录结构和文件，因此它带来的好处大致有以下3个：</p>
<ol>
<li><p>增加了系统的安全性，限制了用户的权力；</p>
<p>在经过 chroot 之后，在新根下将访问不到旧系统的根目录结构和文件，这样就增强了系统的安全性。这个一般是在登录 (login) 前使用 chroot，以此达到用户不能访问一些特定的文件。</p>
</li>
<li><p>建立一个与原系统隔离的系统目录结构，方便用户的开发；</p>
<p>使用 chroot 后，系统读取的是新根下的目录和文件，这是一个与原系统根下文件不相关的目录结构。在这个新的环境中，可以用来测试软件的静态编译以及一些与系统不相关的独立开发。</p>
</li>
<li><p>切换系统的根目录位置，引导 Linux 系统启动以及急救系统等。</p>
<p>chroot 的作用就是切换系统的根位置，而这个作用最为明显的是在系统初始引导磁盘的处理过程中使用，从初始 RAM 磁盘 (initrd) 切换系统的根位置并执行真正的 init。另外，当系统出现一些问题时，我们也可以使用 chroot 来切换到一个临时的系统。</p>
</li>
</ol>
<p>参考：<a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/82756">chroot 命令实例讲解</a></p>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><p>使用<code>ls -l</code>可以查看文件（夹）的访问权限，左三位：定义user(owner)的权限；中三位：定义group的权限；右三位：定义other的权限。r为可读，数字4表示；w为可写，数字2表示；x为可执行，数字1表示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">练习：rw-rw-r--, rwxrwxr-x, rwxr-x---, rw------, rwxr-xr-x</span><br><span class="line">	664,775,750,600,755</span><br></pre></td></tr></table></figure>

<p>进程安全上下文，进程对文件的访问权限应用模型：进程的属主与文件的属主是否相同；如果相同，则应用属主权限；否则，则检查进程的属主是否属于文件的属组；如果是，则应用属组权限；否则，就只能应用other的权限。</p>
<p><code>rwx</code>对文件来说，r表示可以获取文件数据，w表示可以修改文件的数据，x表示可将此文件运行。</p>
<p><code>rwx</code>对文件夹来说，r表示可以获取其下的文件列表，x表示看完已修改此目录下的文件列表，即创建或删除文件，x表示可以进入该目录，使用该目录作为工作目录，必须以rw为前提。</p>
<h4 id="权限命令"><a href="#权限命令" class="headerlink" title="权限命令"></a>权限命令</h4><p><strong>chmod</strong></p>
<p>更改文件（夹）权限。</p>
<p>语法：</p>
<p>chmod [OPTION]… MODE[,MODE]… FILE…<br>chmod [OPTION]… OCTAL-MODE FILE…<br>chmod [OPTION]… –reference=RFILE FILE…</p>
<p>授权对象：u属主，g属组，o其他，a所有</p>
<p>授权表示法：+[rwx]增加权限，-[rwx]去除权限，=[rwx]设置权限</p>
<p>或者直接使用数字表示：<code>chmod 744 filename</code></p>
<p>选项：</p>
<p>-R, –recursive：递归修改</p>
<p>注意：用户仅能修改属主为自己的那些文件的权限</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ ls -l test</span><br><span class="line">-rw-rw-r--. 1 hyp hyp 8872 3月  19 22:03 test</span><br><span class="line">[hyp@localhost ~]$ chmod g-w test</span><br><span class="line">[hyp@localhost ~]$ ls -l test</span><br><span class="line">-rw-r--r--. 1 hyp hyp 8872 3月  19 22:03 test</span><br><span class="line">[hyp@localhost ~]$ chmod 664 test</span><br><span class="line">[hyp@localhost ~]$ ls -l test</span><br><span class="line">-rw-rw-r--. 1 hyp hyp 8872 3月  19 22:03 test</span><br></pre></td></tr></table></figure>

<p><strong>练习题：</strong></p>
<p>用户对目录有写权限，但对目录下的文件没有写权限时，能否修改此文件内容？能否删除此文件？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ mkdir ping</span><br><span class="line">[hyp@localhost ~]$ ll -d ping/</span><br><span class="line">drwxrwxr-x. 2 hyp hyp 6 3月  20 16:26 ping/</span><br><span class="line">[hyp@localhost ~]$ echo &#x27;cat /etc/fstab&#x27; &gt; ping/fstab</span><br><span class="line">[hyp@localhost ~]$ ll ping/fstab</span><br><span class="line">-rw-rw-r--. 1 hyp hyp 15 3月  20 16:27 ping/fstab</span><br><span class="line">[hyp@localhost ~]$ chmod 440 ping/fstab</span><br><span class="line">[hyp@localhost ~]$ echo &quot;nihao&quot; &gt;&gt; ping/fstab #不能修改</span><br><span class="line">bash: ping/fstab: 权限不够</span><br><span class="line">[hyp@localhost ~]$ rm ping/fstab</span><br><span class="line">rm：是否删除有写保护的普通文件 &quot;ping/fstab&quot;？y</span><br><span class="line">[hyp@localhost ~]$ ll ping/fstab #可以删除</span><br><span class="line">ls: 无法访问ping/fstab: 没有那个文件或目录</span><br></pre></td></tr></table></figure>

<p><strong>umask</strong></p>
<p>umask是文件权限反向掩码。新建文件比新建文件夹确少可执行权限。所以新建文件夹权限为 <code>777-umask</code>，新建文件权限为 <code>666-umask</code>。使用 <code>umask [mode]</code>更改掩码值（此类设定仅对当前shell进程有效），也可以在创建文件夹时，设置权限（不是rwx-umask）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ umask #查看umask值，后三位为属主、属组、其他</span><br><span class="line">0002</span><br><span class="line">[hyp@localhost ~]$ mkdir newdir</span><br><span class="line">[hyp@localhost ~]$ ls -ld newdir</span><br><span class="line">drwxrwxr-x. 2 hyp hyp 6 3月  20 16:31 newdir</span><br><span class="line">[hyp@localhost ~]$ echo &quot;new file&quot; &gt; newfile</span><br><span class="line">[hyp@localhost ~]$ ls -l newfile</span><br><span class="line">-rw-rw-r--. 1 hyp hyp 9 3月  20 16:32 newfile</span><br><span class="line">[hyp@localhost ~]$ mkdir -m 700 newdir2</span><br><span class="line">[hyp@localhost ~]$ ls -ld newdir2</span><br><span class="line">drwx------. 2 hyp hyp 6 3月  20 16:38 newdir2</span><br></pre></td></tr></table></figure>

<h4 id="丛属关系管理命令"><a href="#丛属关系管理命令" class="headerlink" title="丛属关系管理命令"></a>丛属关系管理命令</h4><p><strong>chown</strong></p>
<p>更改文件（夹）的属主，语法：<code>chown [OPTION]... [OWNER][:[GROUP]] FILE...</code>。</p>
<p>使用选项-R递归修改。</p>
<p><strong>chgrp</strong></p>
<p>更改文件（夹）的属组，语法： <code>chgrp [OPTION]... GROUP FILE...</code>。</p>
<p>使用选项-R递归修改。</p>
<p>仅管理员可修改文件的属主和属组</p>
<p><strong>练习：</strong></p>
<p>1、新建系统组mariadb, 新建系统用户mariadb, 属于mariadb组，要求其没有家目录，且shell为/sbin/nologin；尝试root切换至用户，查看其命令提示符；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo useradd  mariadb -s /sbin/nologin -M</span><br><span class="line">[hyp@localhost ~]$ tail -1 /etc/passwd</span><br><span class="line">mariadb:x:1002:1002::/home/mariadb:/sbin/nologin</span><br><span class="line">[hyp@localhost ~]$ ls /home/</span><br><span class="line">hyp</span><br><span class="line">[hyp@localhost ~]$ su root</span><br><span class="line">密码：</span><br><span class="line">[root@localhost hyp]# su mariadb</span><br><span class="line">This account is currently not available.</span><br><span class="line">[root@localhost hyp]# exit</span><br><span class="line">exit</span><br><span class="line">[hyp@localhost ~]$ sudo userdel -r mariadb</span><br><span class="line">userdel：未找到 mariadb 的主目录“/home/mariadb”</span><br></pre></td></tr></table></figure>

<p>2、新建GID为5000的组mageedu，新建用户gentoo，要求其家目录为/users/gentoo，密码同用户名；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo groupadd -g 5000 mageedu</span><br><span class="line">[hyp@localhost ~]$ sudo useradd -d /users/gentoo gentoo</span><br><span class="line">useradd：无法创建目录 /users/gentoo</span><br><span class="line">[hyp@localhost ~]$ tail -1</span><br><span class="line">[hyp@localhost ~]$ tail -1 /etc/passwd</span><br><span class="line">gentoo:x:1002:1002::/users/gentoo:/bin/bash</span><br><span class="line">[hyp@localhost ~]$ sudo passwd gentoo</span><br><span class="line">更改用户 gentoo 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[hyp@localhost ~]$ sudo tail -1 /etc/shadow</span><br><span class="line">gentoo:$6$9rccDYAn$L0A3spOJnaUWjH76doWPmF3J8oLgFPeCWxBl6F3JBT5rm4wIH0sd5rqtdvHkpqEt4i08iqwHxFVCuAczxEASq0:17975:0:99999:7:::</span><br></pre></td></tr></table></figure>

<p>3、新建用户fedora，其家目录为/users/fedora，密码同用户名；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo useradd fedora -d /users/fedora</span><br><span class="line">useradd：无法创建目录 /users/fedora</span><br><span class="line">[hyp@localhost ~]$ sudo passwd fedora</span><br><span class="line">更改用户 fedora 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[hyp@localhost ~]$ tail -1 /etc/passwd</span><br><span class="line">fedora:x:1003:1003::/users/fedora:/bin/bash</span><br><span class="line">[hyp@localhost ~]$ sudo tail -1 /etc/shadow</span><br><span class="line">fedora:$6$seONS9db$6K.fe5EtbCgPlzT78Ix3m6ltDcya.s2/djd.R5xOjyl3jIC5y1LTpLFBG4TfNdFKlDj.7KRmBfU5BS5DqDo4k/:17975:0:99999:7:::</span><br></pre></td></tr></table></figure>

<p>4、新建用户www, 其家目录为/users/www；删除www用户，但保留其家目录；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo useradd www -d /users/www</span><br><span class="line">[hyp@localhost ~]$ tail -1 /etc/passwd</span><br><span class="line">www:x:1004:1004::/users/www:/bin/bash</span><br><span class="line">[hyp@localhost ~]$ sudo userdel www</span><br><span class="line">[hyp@localhost ~]$ ll -d /users/www</span><br><span class="line">drwx------. 3 1004 1004 78 3月  20 17:00 /users/www</span><br></pre></td></tr></table></figure>

<p>5、为用户gentoo和fedora新增附加组mageedu; </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo groupmems -g mageedu -a fedora</span><br><span class="line">[hyp@localhost ~]$ sudo groupmems -g mageedu -a gentoo</span><br><span class="line">[hyp@localhost ~]$ sudo groupmems  -g mageedu -l</span><br><span class="line">fedora  gentoo</span><br></pre></td></tr></table></figure>

<p>6、复制目录/var/log至/tmp/目录，修改/tmp/log及其内部的所有文件的属组为mageedu，并让属组对目录本身拥有写权限；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo mv  /var/log /tmp/</span><br><span class="line">[hyp@localhost ~]$ ls -ld  /tmp/log/</span><br><span class="line">drwxr-xr-x. 16 root root 4096 3月  20 12:59 /tmp/log/</span><br><span class="line">[hyp@localhost ~]$ sudo chgrp -R mageedu  /tmp/log/  #更改组</span><br><span class="line">[hyp@localhost ~]$ ls -ld  /tmp/log/</span><br><span class="line">drwxr-xr-x. 16 root mageedu 4096 3月  20 12:59 /tmp/log/</span><br><span class="line">[hyp@localhost ~]$ sudo chmod g+w /tmp/log/ #更改组权限</span><br><span class="line">[hyp@localhost ~]$ ls -ld  /tmp/log/</span><br><span class="line">drwxrwxr-x. 16 root mageedu 4096 3月  20 12:59 /tmp/log/</span><br></pre></td></tr></table></figure>

<h3 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h3><h4 id="SUID、SGID和SBIT"><a href="#SUID、SGID和SBIT" class="headerlink" title="SUID、SGID和SBIT"></a>SUID、SGID和SBIT</h4><p>进程是发起此进程用户的代理，因此以此用户的身份和权限完成所有操作；</p>
<p>(1) 判断进程的属主，是否为被访问的文件属主；如果是，则应用属主的权限；否则进入第2步；<br>(2) 判断进程的属主，是否属于被访问的文件属组；如果是，则应用属组的权限；否则进入第3步；<br>(3) 应用other的权限；</p>
<p><strong>SUID</strong></p>
<p>当s这个标志出现在文件所有者的x权限上时，如/usr/bin/passwd这个文件的权限状态：“-rwsr-xr-x.”，此时就被称为Set UID，简称为SUID。那么这个特殊权限的特殊性的作用是什么呢？<br>1、SUID权限仅对二进制程序(binary program)有效；<br>2、执行者对于该程序需要具有x的可执行权限；<br>3、本权限仅在执行该程序的过程中有效(run-time)；<br>4、执行者将具有该程序拥有者(owner)的权限。<br>SUID的目的就是：让本来没有相应权限的用户运行这个程序时，可以访问他没有权限访问的资源。用户运行某程序时，如果此程序拥有SUID权限，那么程序运行为进程时，进程的属主不是发起者，而程序文件自己的属主；</p>
<p>passwd就是一个很鲜明的例子，下面我们就来了解一下这相passwd执行的过程。</p>
<p>我们知道，系统中的用户密码是保存在/etc/shadow中的，而这个文件的权限是———-. （这个权限和以前版本的RHEL也有差别，以前的是-r——–）。其实有没有r权限不重要，因为我们的root用户是拥有最高的权限，什么都能 干了。关键是要把密码写入到/etc/shadow中。我们知道，除了root用户能修改密码外，用户自己同样也能修改密码，为什么没有写入权限，还能修 改密码，就是因为这个SUID功能。</p>
<p>下面就是passwd这个命令的执行过程<br>1、因为/usr/bin/passwd的权限对任何的用户都是可以执行的，所以系统中每个用户都可以执行此命令。<br>2、而/usr/bin/passwd这个文件的权限是属于root的。<br>3、当某个用户执行/usr/bin/passwd命令的时候，就拥有了root的权限了。<br>4、于是某个用户就可以借助root用户的权力，来修改了/etc/shadow文件了。<br>5、最后，把密码修改成功。</p>
<blockquote>
<p>注：这个SUID只能运行在二进制的程序上（系统中的一些命令），不能用在脚本上（script），因为脚本还是把很多的程序集合到一起来执行，而不是脚本自身在执行。同样，这个SUID也不能放到目录上，放上也是无效的。</p>
</blockquote>
<p><strong>SGID</strong></p>
<p>我们前面讲过，当s这个标志出现在文件所有者的x权限上时，则就被称为Set UID。那么把这个s放到文件的所属用户组x位置上的话，就是SGID。如开头的/usr/bin/wall命令。<br>那么SGID的功能是什么呢？和SUID一样，只是SGID是获得该程序所属用户组的权限。<br>这相SGID有几点需要我们注意：<br>1、SGID对二进制程序有用；<br>2、程序执行者对于该程序来说，需具备x的权限；<br>3、SGID主要用在目录上；<br>理解了SUID，我想SGID也很容易理解。如果用户在此目录下具有w权限的话，若使用者在此目录下建立新文件，则新文件的群组与此目录的群组相同。当目录属组有写权限，且有SGID权限时，那么所有属于此目录的属组，且以属组身份在此目录中新建文件或目录时，新文件的属组不是用户的基本组，而是此目录的属组。</p>
<p><strong>Sticky Bit</strong></p>
<p>这个就是针对others来设置的了，和上面两个一样，只是功能不同而已。<br>SBIT（Sticky Bit）目前只针对目录有效，对于目录的作用是：当用户在该目录下建立文件或目录时，仅有自己与 root才有权力删除。对于属组或全局可写的目录，组内的所有用户或系统上的所有用户对在此目录中都能创建新文件或删除所有的已有文件；如果为此类目录设置Sticky权限，则每个用户能创建新文件，且只能删除自己的文件；</p>
<p>最具有代表的就是/tmp目录，任何人都可以在/tmp内增加、修改文件（因为权限全是rwx），但仅有该文件/目录建立者与 root能够删除自己的目录或文件。系统上的/tmp和/var/tmp目录默认均有sticky权限。</p>
<blockquote>
<p>注：这个SBIT对文件不起作用。</p>
</blockquote>
<p><strong>设置方法</strong></p>
<p>和我们前面说的rwx差不多，也有两种方式，一种是以字符，一种是以数字。<br>4 为 SUID ＝ u+s<br>2 为 SGID ＝ g+s<br>1 为 SBIT ＝ o+t</p>
<p><strong>为什么会有大写的S和T</strong></p>
<p>因为他们这个位置没有了x权限，如果没有了x权限，根据我们上面讲的内容，其实，这个特 殊的权限就相当于一个空的权限，没有意义。也就是说，如果你看到特殊权限位置上变成了大写的了，那么，就说明，这里有问题，需要排除。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/dyh004/p/6378456.html">Linux之特殊权限（SUID/SGID/SBIT）</a></p>
<h4 id="文件属性控制"><a href="#文件属性控制" class="headerlink" title="文件属性控制"></a>文件属性控制</h4><p>在Linux中，有一些系统文件，对系统的运行有着至关重要的作用，如/etc/fstab等，一般不允许修改，这个时候，我们可以赋予文件/目录<code>r--------</code>的权限；然而，还有一个更为简单有效的命令<code>chattr</code>可以实现该功能！</p>
<p>特殊权限的要求：</p>
<blockquote>
<ul>
<li><p>所支持的文件系统包括：<code>ext2</code>、<code>ext3</code>、<code>ext4</code>和<code>xfs</code></p>
</li>
<li><p>一般要求内核版本不低于2.2(查看版本的命令如下):</p>
<blockquote>
<p>uname -a<br>lsb_release -a</p>
</blockquote>
</li>
<li><p>不能保护 <code>/</code> <code>/tmp</code> <code>/dev</code> <code>/var</code>目录</p>
</li>
<li><p>chattr 只能由root用户使用</p>
</li>
</ul>
</blockquote>
<p><strong>chattr</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr [ -RVf ] [ -v version ] [ mode ] files...</span><br></pre></td></tr></table></figure>

<p>最关键的是在[mode]部分，[mode]部分是由<code>+-=</code>和<code>[ASacDdIijsTtu]</code>这些字符组合的，这部分是用来控制文件的属性。</p>
<blockquote>
<ul>
<li><strong>+</strong> : 在原有参数设定基础上，追加参数</li>
<li><strong>-</strong> ：在原有参数设定基础上，移除参数</li>
<li><strong>=</strong> ：更新为指定参数设定</li>
<li>A ：文件或目录的 atime (access time)不可被修改(modified),可以有效预防例如手提电脑磁盘I/O错误的发生</li>
<li><strong>a</strong> ：即append，设定该参数后，只能向文件中添加数据，而不能删除；</li>
<li>b：不更新文件或目录的最后存取时间。</li>
<li>c ：即compresse，设定文件是否经压缩后再存储。读取时需要经过自动解压操作。</li>
<li>d：将文件或目录排除在倾倒操作之外。</li>
<li><strong>i</strong> ：设定文件不能被删除、改名、设定链接关系，同时不能写入或新增内容；对目录</li>
<li>s ：保密性地删除文件或目录，即硬盘空间被全部收回</li>
<li>S：即时更新文件或目录。</li>
<li>u ：与s相反，当设定为u时，数据内容其实还存在磁盘中，可以用于undeletion.</li>
</ul>
</blockquote>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　-R 递归处理，将指定目录下的所有文件及子目录一并处理。</span><br><span class="line">　　-v&lt;版本编号&gt; 设置文件或目录版本。</span><br><span class="line">　　-V 显示指令执行过程。</span><br><span class="line">　　+&lt;属性&gt; 开启文件或目录的该项属性。</span><br><span class="line">　　-&lt;属性&gt; 关闭文件或目录的该项属性。</span><br><span class="line">　　=&lt;属性&gt; 指定文件或目录的该项属性。</span><br></pre></td></tr></table></figure>

<p><strong>lsattr</strong></p>
<p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsattr [ -RVadv ] [ files...  ]</span><br></pre></td></tr></table></figure>

<p>参数如下：</p>
<blockquote>
<ul>
<li>a : 列出目录下的所有文件，包括隐藏文件</li>
<li>d : 查看本目录自身的权限</li>
<li>-R ：连同子目录的数据一并列出来！</li>
</ul>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Jimmy1988/p/7265816.html">Linux文件权限与属性详解 之 chattr &amp; lsattr</a></p>
<h3 id="ACL权限"><a href="#ACL权限" class="headerlink" title="ACL权限"></a>ACL权限</h3><p><strong>什么是ACL</strong></p>
<p>ACL(Access Control List)，访问控制列表。让不属于任何一个组的用户，只是以单用户的身份被赋予特定权限。ACL可以针对单一用户、单一文件或目录来进行r、w、x的权限设置，对于需要特殊权限的使用状况非常有帮助。</p>
<p>CentOS7上文件系统为<strong>XFS</strong>，<strong>XFS</strong>默认支持ACL。而ext文件系统需要使用下面命令查看：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df -Th #找到根目录/的挂载点</span><br><span class="line">dumpe2fs -h &lt;挂载点&gt;  #ext文件系统</span><br><span class="line">xfs_info &lt;挂载点&gt; #xfs文件系统</span><br></pre></td></tr></table></figure>

<p>系统默认的是不会安装ACL权限的，因此需要我们自己动手：</p>
<ul>
<li><strong>RPM 包</strong>：<br>前提：能够获取到系统安装包<br>命令：<code>rpm -ivh libacl-x.x.xx-x.x acl-x.x.xx-x.x.rpm</code></li>
<li><strong>yum</strong>:<br>前提：主机已经联网，且yum可用<br>命令：<code>yum -y insatll libacl acl</code></li>
</ul>
<p><strong>ACL文件设置</strong></p>
<ul>
<li><p><strong>getfacl</strong>: 获取文件或目录的ACL设置信息<br>命令： getfacl [-bkndRLP] { -m|-M|-x|-X … } file …</p>
<p>user:USERNAME:MODE<br>group:GROUPNAME:MODE</p>
<p>参数：</p>
<blockquote>
<p>-a , –access：显示文件或目录的访问控制列表<br>-d , –default：显示文件或目录的默认（缺省）的访问控制列表<br>-c , –omit-header：不显示默认的访问控制列表<br>-R , –recursive：操作递归到子目录</p>
</blockquote>
</li>
<li><p><strong>setfacl</strong>: 设置文件或目录的ACL设置信息<br>命令：setfacl [-bkndRLP] { -m|-M|-x|-X … } file …</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">赋权给用户：</span><br><span class="line">setfacl  -m  u:USERNAME:MODE  FILE...</span><br><span class="line">赋权级组：</span><br><span class="line">setfacl  -m  g:GROUPNAME:MODE FILE...</span><br><span class="line"></span><br><span class="line">撤销赋权：</span><br><span class="line">setfacl  -x u:USERNAME  FILE...</span><br><span class="line">setfacl  -x  g:GROUPNAME  FILE...</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<blockquote>
<p>-m, –modify=acl：修改文件或目录的扩展ACL设置信息<br>-x, –remove=acl：从文件或目录删除一个扩展的ACL设置信息<br>-b, –remove-all：删除所有的扩展的ACL设置信息<br>-k, –remove-default：删除缺省的acl设置信息<br>-n, –no-mask：不要重新计算有效权限。setfacl默认会重新计算ACL mask，除非mask被明确的制定<br>-d, –default：设置默认的ACL设置信息（只对目录有效）<br>-R, –recursive：操作递归到所有子目录和 文件</p>
</blockquote>
</li>
</ul>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost home]$ sudo setfacl -m u:hyp:rwx git</span><br><span class="line">[hyp@localhost home]$ sudo setfacl -m g:wheel:r-x git</span><br><span class="line">[hyp@localhost home]$ getfacl git</span><br><span class="line"><span class="meta">#</span><span class="bash"> file: git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> owner: git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> group: git</span></span><br><span class="line">user::rwx</span><br><span class="line">user:hyp:rwx</span><br><span class="line">group::---</span><br><span class="line">group:wheel:r-x</span><br><span class="line">mask::rwx</span><br><span class="line">other::---</span><br><span class="line">[hyp@localhost home]$ sudo setfacl -x g:wheel git</span><br><span class="line">[hyp@localhost home]$ sudo setfacl -x u:hyp git</span><br><span class="line">[hyp@localhost home]$ getfacl git</span><br><span class="line"><span class="meta">#</span><span class="bash"> file: git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> owner: git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> group: git</span></span><br><span class="line">user::rwx</span><br><span class="line">group::---</span><br><span class="line">mask::---</span><br><span class="line">other::---</span><br></pre></td></tr></table></figure>

<h3 id="管理员权限"><a href="#管理员权限" class="headerlink" title="管理员权限"></a>管理员权限</h3><p>一般情况下，很少需要登录root管理员用户，因为其权限过大，为了避免做出不可挽回的操作，应该尽量不使用root用户。但是，普通用户不具有执行管理员命令的权限，所以linux提供了<code>sudo</code>命令，这个命令可以使具有管理员权限的普通用户执行管理员命令。</p>
<h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><p>（1) 特征：</p>
<ul>
<li>对用户的执行命令权限进行限制</li>
<li>提供了日志记录，可详细记录每个用户具体的操作(<a target="_blank" rel="noopener" href="http://blog.csdn.net/xyz846/article/details/26406955">http://blog.csdn.net/xyz846/article/details/26406955</a>)</li>
<li>临时性的时间戳(一般为5min)，在此期间使用sudo命令，不需要再输入密码</li>
<li>配置文件为<code>/etc/sudoers</code>,可以使<code>root</code>对用户集中管理</li>
</ul>
<p>（2) 工作流程：</p>
<ul>
<li>当用户执行sudo时，系统寻找/etc/sudoers文件，判断该用户是否具备执行sudo的权限</li>
<li>确认用户权限后，让用户输入自身的密码</li>
<li>若密码合法，则开始执行sudo后续的命令</li>
<li>root执行sudo时不需要输入密码</li>
<li>自身切换自身也不需要输入密码</li>
</ul>
<p>sudo [optional]  [argument]:<br>选项:</p>
<blockquote>
<p>-b：在后台执行指令； -h：显示帮助<br>-H：将HOME环境变量设为新身份的HOME环境变量<br>-k：结束密码的有效期限，也就是下次再执行sudo时便需要输入密码<br>-l：列出目前用户可执行与无法执行的指令<br>-p：改变询问密码的提示符号<br>-s：执行指定的shell<br>-u&lt;用户&gt;：以指定的用户作为新的身份。若不加上此参数，则预设以root作为新的身份；<br>-v：延长密码有效期限5分钟；</p>
</blockquote>
<p><strong>Argument</strong>:</p>
<blockquote>
<p>需要运行的指令</p>
</blockquote>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>那么如何让用户拥有管理员权限呢？</p>
<p>对sudo权限的配置其实就是修改 /etc/sudoers 文件，有两种方式实现：</p>
<blockquote>
<ul>
<li>vim /etc/sudoers</li>
<li><strong>visudo</strong> ： 推荐使用</li>
</ul>
</blockquote>
<p>  方法一： 修改 /etc/sudoers 文件，找到下面一行，把前面的注释（#）去掉</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## Allows people in group wheel to run all commands</span><br><span class="line">%wheel    ALL=(ALL)    ALL</span><br></pre></td></tr></table></figure>

<p>然后修改用户，使其属于root组（wheel），命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#usermod -g wheel tommy</span><br></pre></td></tr></table></figure>

<p>修改完毕，现在可以用tommy帐号登录，然后用命令 sudo，即可获得root权限进行操作。</p>
<p>方法二： 修改 /etc/sudoers 文件，找到下面一行，在root下面添加一行，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## Allow root to run any commands anywhere</span><br><span class="line">root    ALL=(ALL)     ALL</span><br><span class="line">tommy   ALL=(ALL)     ALL</span><br></pre></td></tr></table></figure>

<p>修改完毕，现在可以用tommy帐号登录，然后用命令 sudo ，即可获得root权限进行操作。</p>
<p>方法三： 修改 /etc/passwd 文件，找到如下行，把用户ID修改为 0 ，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tommy:x:500:500:tommy:/home/tommy:/bin/bash</span><br></pre></td></tr></table></figure>

<p>修改后如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tommy:x:0:500:tommy:/home/tommy:/bin/bash</span><br></pre></td></tr></table></figure>

<p>保存，用tommy账户登录后，直接获取的就是root帐号的权限。</p>
<p>友情提醒：虽然方法三看上去简单方便，但一般不推荐使用，推荐使用方法二。  </p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ sudo useradd tommy -M</span><br><span class="line">[hyp@localhost ~]$ sudo passwd tommy</span><br><span class="line">更改用户 tommy 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[hyp@localhost ~]$ sudo usermod -g wheel tommy</span><br><span class="line">[hyp@localhost ~]$ su - tommy</span><br><span class="line">密码：</span><br><span class="line">上一次登录：五 3月 22 14:03:09 CST 2019pts/1 上</span><br><span class="line">su: 警告：无法更改到 /home/tommy 目录: 没有那个文件或目录</span><br><span class="line">-bash-4.2$ sudo ls /</span><br><span class="line"></span><br><span class="line">我们信任您已经从系统管理员那里了解了日常注意事项。</span><br><span class="line">总结起来无外乎这三点：</span><br><span class="line"></span><br><span class="line">    #1) 尊重别人的隐私。</span><br><span class="line">    #2) 输入前要先考虑(后果和风险)。</span><br><span class="line">    #3) 权力越大，责任越大。</span><br><span class="line"></span><br><span class="line">[sudo] tommy 的密码：</span><br><span class="line">bin   dev  home  lib64  mnt  proc  run   srv  tmp    usr  web</span><br><span class="line">boot  etc  lib   media  opt  root  sbin  sys  users  var</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><p><strong>wc</strong></p>
<p>word count，为统计指定文件中的字节数、字数、行数，并将统计结果显示输出。</p>
<p>语法：<code>wc [选项] 文件...</code></p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-c 统计字节数。</span><br><span class="line">-l 统计行数。</span><br><span class="line">-m 统计字符数。这个标志不能与 -c 标志一起使用。</span><br><span class="line">-w 统计字数。一个字被定义为由空白、跳格或换行字符分隔的字符串。</span><br><span class="line">-L 打印最长行的长度。</span><br></pre></td></tr></table></figure>

<p><strong>cut</strong></p>
<p>是一个选取命令，以行为单位，用指定分隔符将行切分为若干字段，选取所需要的字段。</p>
<p>语法：<code>cut [option] files</code></p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-d：用来定义分隔符，默认为tab键，一般与-f配合使用（如果分隔符是空格，必须是两个单引号之间确实有一个空格，是一个哦，不是支持多个）</span><br><span class="line">-f：需要选取的字段，根据-d切分的字段集选取，下标从1开始</span><br><span class="line">-s：表示不包括那些不含分隔符的行，用于去掉注释或者标题一类的信息</span><br><span class="line">-c：以字符为单位进行分割，可以选取指定字符</span><br><span class="line">-b：以字节为单位进行分割，可以选取指定字节，这些字节位置将忽略多字节字符边界（比如：汉字），除非同时指定了-n参数</span><br><span class="line">-n：取消分割多字节字符，只能和-b参数配合使用，即如果字符的最后一个字节落在由-b参数列表指定的范围之内，则该字符将被选出，否则，该字符将被排除。</span><br><span class="line">不难看出上面参数中，-f、-c、-b都是用来表示提取指定范围数据的，这个范围的表示方法如下：</span><br><span class="line">    N：只取第N项</span><br><span class="line">    N-：从第N项一直到行尾</span><br><span class="line">    N-M：从第N项到第M项（包括M项）</span><br><span class="line">    -M：从第一项到第M项（包括M项）</span><br><span class="line">    -：从第一项开始到结束的所有项</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">输出PATH变量第五个路径和后面的路径</span></span><br><span class="line">[hyp@localhost ~]$ echo $PATH | cut -d: -f5-</span><br><span class="line">/home/hyp/.local/bin:/home/hyp/bin</span><br></pre></td></tr></table></figure>

<p><strong>sort</strong></p>
<p>将文本文件内容加以排序,sort可针对文本文件的内容，以行为单位来排序，默认是按照ASCII字符排序。</p>
<p>语法： <code>sort [option] [file]....</code></p>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-n：基于数值大小而非字符进行排序；</span><br><span class="line">-t CHAR：指定分隔符；</span><br><span class="line">-k #：用于排序比较的字段；</span><br><span class="line">-r：逆序排序；</span><br><span class="line">-f：忽略字符大小写</span><br><span class="line">-u：重复的行只保留一份；</span><br><span class="line">	复复行：连续且相同；</span><br><span class="line">  +&lt;起始栏位&gt;-&lt;结束栏位&gt;   以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位。</span><br></pre></td></tr></table></figure>

<p><strong>uniq</strong></p>
<p>报告或移除重复的行，不附加任何选项时去除临近的相同项。</p>
<p>语法：<code>uniq [option] [file|stdin]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-c, --count           在每行前加上表示相应行目出现次数的前缀编号</span><br><span class="line">-d, --repeated        只输出重复的行</span><br><span class="line">-D, --all-repeated[=delimit-method    显示所有重复的行</span><br><span class="line">                      delimit-method=&#123;none(default),prepend,separate&#125;</span><br><span class="line">                      以空行为界限</span><br><span class="line">-f, --skip-fields=N   比较时跳过前N 列</span><br><span class="line">-i, --ignore-case     在比较的时候不区分大小写</span><br><span class="line">-s, --skip-chars=N    比较时跳过前N 个字符</span><br><span class="line">-u, --unique          只显示唯一的行</span><br><span class="line">-z, --zero-terminated 使用&#x27;\0&#x27;作为行结束符，而不是新换行</span><br><span class="line">-w, --check-chars=N   对每行第N 个字符以后的内容不作对照</span><br></pre></td></tr></table></figure>

<p><strong>diff</strong></p>
<p>用于比较文件的内容，特别是比较两个版本不同的文件以找到改动的地方。diff在命令行中打印每一个行的改动。最新版 本的diff还支持二进制文件。diff程序的输出被称为补丁 (patch)，因为Linux系统中还有一个patch程序，可以根据diff的输出将 a.c的文件内容更新为b.c。diff是svn、cvs、git等版本控制工具不可或缺的一部分。</p>
<p>diff 命令能比较单个文件或者目录内容。如果指定比较的是文件，则只有当输入为文本文件时才有效。以逐行的方式，比较文本文件的异同处。如果指定比较的是目录的 的时候，diff 命令会比较两个目录下名字相同的文本文件。列出不同的二进制文件、公共子目录和只在一个目录出现的文件。</p>
<p>语法：<code>diff[选项][文件1或目录1][文件2或目录2]</code></p>
<ul>
<li>FILE1 FILE2 ：源是一个文件，目标也是文件。这两个文件必须是文本文件。以逐行的方式，比较文本文件的异同处。<br>e.g. diff 1.txt 2.txt</li>
<li>DIR1 DIR2 ：源是一个目录，目标是目录。diff 命令会比较两个目录下名字相同的文本文件，依照字母次序排序，列出不同的二进制文件，列出公共子目录，列出只在一个目录出现的文件。<br>e.g. diff dir1 dir2</li>
<li>FILE DIR ：源是一个文件，目标是目录。diff命令把源文件与目标目录下的同名文件比较。<br>e.g. diff 1.txt dir2</li>
<li>DIR FILE ：源是一个目录，目标是文件（不是目录）。源目录下所有文件中与目标文件同名的文件，将用来与目标文件比较。<br>e.g. diff dir1 2.txt</li>
</ul>
<p>选项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- 　指定要显示多少行的文本。此参数必须与-c或-u参数一并使用。</span><br><span class="line">-b ——  忽略一行中的空字符的区别（例如“Hello World!!” 与 “Hello        World!!”认为是一样的）</span><br><span class="line">-B —— 忽略空白行</span><br><span class="line">-c 　显示全部内文，并标出不同之处。</span><br><span class="line">-i —— 忽略大小写的不同</span><br><span class="line">-a逐行比较文本文件</span><br><span class="line">-u 显示有差异行的前后几行(上下文), 默认是前后各3行, 这样, patch中带有更多的信息.</span><br><span class="line">-p显示代码所在的c函数的信息</span><br><span class="line">-N 选项确保补丁文件将正确地处理已经创建或删除文件的情况。</span><br><span class="line">-r —— 如果diff后面接的目录时，会递归比较子目录中的文件不同</span><br></pre></td></tr></table></figure>

<p>diff输出内容有三种格式：</p>
<p>（1）正常格式（normal diff）<br>（2）上下文格式（context diff）<br>（3）合并格式（unified diff）</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ ls</span><br><span class="line">file1  file2</span><br><span class="line">[hyp@localhost ~]$ diff file1 file2 #正常格式</span><br><span class="line">4d3</span><br><span class="line">&lt; 4</span><br><span class="line">[hyp@localhost ~]$ diff -c file1 file2  #上下文格式</span><br><span class="line">*** file1       2019-03-21 20:22:58.144610337 +0800</span><br><span class="line">--- file2       2019-03-21 20:23:21.149312085 +0800</span><br><span class="line">***************</span><br><span class="line">*** 1,7 ****</span><br><span class="line">  1</span><br><span class="line">  2</span><br><span class="line">  3</span><br><span class="line">- 4</span><br><span class="line">  55</span><br><span class="line">  6</span><br><span class="line">  755</span><br><span class="line">--- 1,6 ----</span><br><span class="line"><span class="meta">#</span><span class="bash">第一部分的两行，显示两个文件的基本情况：文件名和时间信息。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string">&quot;***&quot;</span>表示变动前的文件，<span class="string">&quot;---&quot;</span>表示变动后的文件。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第二部分是15个星号，将文件的基本情况与变动内容分割开。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第三部分显示变动前的文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果是加号（+），表示该行为新增。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第四部分显示变动后的文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">除了变动行（第4行）以外，也是上下文各显示三行，总共显示7行。</span></span><br><span class="line">[hyp@localhost ~]$ diff -u file1 file2 #合并格式</span><br><span class="line">--- file1       2019-03-21 20:22:58.144610337 +0800</span><br><span class="line">+++ file2       2019-03-21 20:23:21.149312085 +0800</span><br><span class="line">@@ -1,7 +1,6 @@</span><br><span class="line"> 1</span><br><span class="line"> 2</span><br><span class="line"> 3</span><br><span class="line">-4</span><br><span class="line"> 55</span><br><span class="line"> 6</span><br><span class="line"> 755</span><br><span class="line"><span class="meta">#</span><span class="bash">第一部分的两行，显示两个文件的基本情况：文件名和时间信息。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string">&quot;---&quot;</span>表示变动前的文件，<span class="string">&quot;+++&quot;</span>表示变动后的文件。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第二部分变动的位置用两个@作为起首和结束前面的<span class="string">&quot;-1,7&quot;</span>分成三个部分：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">减号表示第一个文件（即f1），<span class="string">&quot;1&quot;</span>表示第1行，<span class="string">&quot;7&quot;</span>表示连续7行。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">合在一起，就表示下面是第一个文件从第1行开始的连续7行。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">同样的，<span class="string">&quot;+1,7&quot;</span>表示变动后，成为第二个文件从第1行开始的连续7行。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第三部分显示变动前的文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果是加号（+），表示该行为新增。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">第四部分显示变动后的文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">除了有变动的那些行以外，也是上下文各显示3行。它将两个文件的上下文，合并显示在一起，所以叫做<span class="string">&quot;合并格式&quot;</span>。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">每一行最前面的标志位，空表示无变动，减号表示第一个文件删除的行，加号表示第二个文件新增的行。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>cmp</strong></p>
<p>diff是以行为单位进行文件的比较，cmp是以字节为单位进行文件的比较。</p>
<p>语法：<code>cmp [option] filename_1 filename_2 </code></p>
<p>选项：</p>
<p>-b —— 将所有的不同的字节的地方都显示出来，若没有-s，则cmp会默认输出第一个发现的的不同点。</p>
<p>备注：使用cmp工具可以比较二进制文件的不同</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ cat file1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">55</span><br><span class="line">6</span><br><span class="line">755</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">[hyp@localhost ~]$ cat file2</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">55</span><br><span class="line">6</span><br><span class="line">755</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">[hyp@localhost ~]$ cmp -b file1 file2</span><br><span class="line">file1 file2 不同：第 4 行，第 7 字节为  64 4  65 5</span><br></pre></td></tr></table></figure>

<p><strong>patch</strong></p>
<p>向文件打补丁。</p>
<p>在项目中，有些模块是开源的，没有源码或者不能改动源码，想要修复、优化里面的Bug，这时就需要用到patch了。制作补丁有两种法法，diff和quilt。</p>
<p>语法：</p>
<p><code>patch [OPTIONS] -i /PATH/TO/PATCH_FILE /PATH/TO/OLDFILE</code></p>
<p><code>patch /PATH/TO/OLDFILE &lt; /PATH/TO/PATCH_FILE</code></p>
<p>（1）diff生成补丁<br><code>diff -u file1.c file2.c &gt; file.patch</code><br>(2)打patch<br><code>patch file.c &lt; file.patch</code></p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ cat file1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">[hyp@localhost ~]$ cat file2</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">87</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">[hyp@localhost ~]$ diff -u file1 file2 &gt; file.patch</span><br><span class="line">[hyp@localhost ~]$ cat file.patch</span><br><span class="line">--- file1       2019-03-21 20:15:00.615187329 +0800</span><br><span class="line">+++ file2       2019-03-21 20:15:28.306738257 +0800</span><br><span class="line">@@ -2,6 +2,7 @@</span><br><span class="line"> 2</span><br><span class="line"> 3</span><br><span class="line"> 4</span><br><span class="line">+87</span><br><span class="line"> 5</span><br><span class="line"> 6</span><br><span class="line"> 7</span><br><span class="line">[hyp@localhost ~]$ patch file.c &lt; file.patch</span><br><span class="line">patching file file.c</span><br><span class="line">Hunk #1 FAILED at 2.</span><br><span class="line">patch: **** Can&#x27;t reopen file file.c : No such file or directory</span><br><span class="line">[hyp@localhost ~]$ patch file1 &lt; file.patch</span><br><span class="line">patching file file1</span><br><span class="line">[hyp@localhost ~]$ diff file1 file2</span><br></pre></td></tr></table></figure>

<p>练习：取出<code>ip addr show ens33</code>命令结果中的ip地址；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hyp@localhost ~]$ ip addr show ens33 | cut -d &#x27; &#x27; -f6 | head -3 | tail -1 |cut -d&#x27;/&#x27; -f1</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">平心</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://pingxin0521.gitee.io/2019/03/19/Linux-%E5%9F%BA%E7%A1%80-4/">https://pingxin0521.gitee.io/2019/03/19/Linux-%E5%9F%BA%E7%A1%80-4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://pingxin0521.gitee.io" target="_blank">平心de小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/03/19/Linux-%E5%AE%89%E5%85%A8-1/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/HjVAdIuT7bZJypS.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">密码学与加密算法</div></div></a></div><div class="next-post pull-right"><a href="/2019/03/19/%E5%B7%A5%E5%85%B7-SVN-1/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/PFDRNxj93taz6pw.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SVN入门</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2019/05/22/Linux-Ubuntu-4/" title="Ubuntu 点滴笔记"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/PFDRNxj93taz6pw.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-10-18</div><div class="title">Ubuntu 点滴笔记</div></div></a></div><div><a href="/2019/03/23/Linux-基础-12/" title="Linux-服务管理"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/PFDRNxj93taz6pw.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-04-03</div><div class="title">Linux-服务管理</div></div></a></div><div><a href="/2019/03/20/Linux-基础-5/" title="Linux-文本处理三剑客--grep"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/HjVAdIuT7bZJypS.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-10-10</div><div class="title">Linux-文本处理三剑客--grep</div></div></a></div><div><a href="/2019/03/20/Linux-基础-6/" title="Linux-文本处理三剑客--sed"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-10-10</div><div class="title">Linux-文本处理三剑客--sed</div></div></a></div><div><a href="/2019/03/20/Linux-基础-7/" title="Linux-文本处理三剑客--awk"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/vCnKyoFJZ1g4XYR.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-10-10</div><div class="title">Linux-文本处理三剑客--awk</div></div></a></div><div><a href="/2019/05/26/Linux-脚本-3/" title="Linux-expect"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2019-10-09</div><div class="title">Linux-expect</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://s2.ax1x.com/2020/02/11/1ovw6J.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">平心</div><div class="author-info__description">年轻人的life、learn and think</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">449</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">77</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">68</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hanyunpeng0521"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hanyunpeng0521" target="_blank" title="Github"><i class="fa fa-github"></i></a><a class="social-icon" href="mailto:m13839441583@163.com" target="_blank" title="Email"><i class="fa fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title=""><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">为什么呢？开始提问吧</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E4%BF%A1%E6%81%AF"><span class="toc-number">2.</span> <span class="toc-text">认证信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">用户命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">用户组管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">3.2.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85"><span class="toc-number">3.3.</span> <span class="toc-text">命令补充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E8%A7%A3chroot"><span class="toc-number">3.4.</span> <span class="toc-text">理解chroot</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%91%BD%E4%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">权限命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9B%E5%B1%9E%E5%85%B3%E7%B3%BB%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-number">4.2.</span> <span class="toc-text">丛属关系管理命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-number">5.</span> <span class="toc-text">特殊权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SUID%E3%80%81SGID%E5%92%8CSBIT"><span class="toc-number">5.1.</span> <span class="toc-text">SUID、SGID和SBIT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E6%8E%A7%E5%88%B6"><span class="toc-number">5.2.</span> <span class="toc-text">文件属性控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACL%E6%9D%83%E9%99%90"><span class="toc-number">6.</span> <span class="toc-text">ACL权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90"><span class="toc-number">7.</span> <span class="toc-text">管理员权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sudo"><span class="toc-number">7.1.</span> <span class="toc-text">sudo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">7.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">8.</span> <span class="toc-text">文本处理</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/05/15/node-2-4/" title="Egg.js -- 为企业级框架和应用而生"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/okfOw28KlZFbE7z.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Egg.js -- 为企业级框架和应用而生"/></a><div class="content"><a class="title" href="/2021/05/15/node-2-4/" title="Egg.js -- 为企业级框架和应用而生">Egg.js -- 为企业级框架和应用而生</a><time datetime="2021-05-15T10:18:59.000Z" title="发表于 2021-05-15 18:18:59">2021-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/30/node-2-3/" title="Koa -- 基于Node.js平台的下一代Web开发框架"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/HjVAdIuT7bZJypS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Koa -- 基于Node.js平台的下一代Web开发框架"/></a><div class="content"><a class="title" href="/2021/04/30/node-2-3/" title="Koa -- 基于Node.js平台的下一代Web开发框架">Koa -- 基于Node.js平台的下一代Web开发框架</a><time datetime="2021-04-30T10:18:59.000Z" title="发表于 2021-04-30 18:18:59">2021-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/01/node-2-1/" title="Node.JS web开发前置知识"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/gGE57HRvpcKPfDY.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Node.JS web开发前置知识"/></a><div class="content"><a class="title" href="/2021/04/01/node-2-1/" title="Node.JS web开发前置知识">Node.JS web开发前置知识</a><time datetime="2021-04-01T03:18:59.000Z" title="发表于 2021-04-01 11:18:59">2021-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/26/%E5%91%A8%E8%AE%B0-10-1/" title="第十一周--谷歌浏览器插件"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/gGE57HRvpcKPfDY.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第十一周--谷歌浏览器插件"/></a><div class="content"><a class="title" href="/2020/12/26/%E5%91%A8%E8%AE%B0-10-1/" title="第十一周--谷歌浏览器插件">第十一周--谷歌浏览器插件</a><time datetime="2020-12-26T10:18:59.000Z" title="发表于 2020-12-26 18:18:59">2020-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/26/%E5%91%A8%E8%AE%B0-10-0/" title="第十一周--浏览器技术"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/05/08/vCnKyoFJZ1g4XYR.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第十一周--浏览器技术"/></a><div class="content"><a class="title" href="/2020/12/26/%E5%91%A8%E8%AE%B0-10-0/" title="第十一周--浏览器技术">第十一周--浏览器技术</a><time datetime="2020-12-26T06:18:59.000Z" title="发表于 2020-12-26 14:18:59">2020-12-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By 平心</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '4lfIXzqxaC1ONs0MJO4oHu07-gzGzoHsz',
      appKey: 'qw99Bw8FD0KVKU9m457CwWsr',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>